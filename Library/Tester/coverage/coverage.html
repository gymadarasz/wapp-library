<!DOCTYPE html>
<html>
    <head>
        <title>Code Coverage Info</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <script>var files = {"\/var\/www\/sandbox\/my-project\/index.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Boilerplate;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\App;","info":"0"},{"code":"use Madsoft\\Library\\Invoker;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\AccountConfig;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Example\\Example;","info":"0"},{"code":"use Madsoft\\Talkbot\\MyScripts;","info":"0"},{"code":"","info":"0"},{"code":"require __DIR__ . '\/vendor\/autoload.php';","info":"1"},{"code":"","info":"0"},{"code":"ini_set('display_errors', '1');","info":"1"},{"code":"ini_set('display_startup_errors', '1');","info":"1"},{"code":"error_reporting(E_ALL | E_STRICT);","info":"1"},{"code":"","info":"0"},{"code":"$invoker = isset($this) &amp;&amp; isset($this-&gt;invoker) ? $this-&gt;invoker : new Invoker();","info":"1"},{"code":"$output = (new App($invoker))-&gt;getOutput(","info":"1"},{"code":"    [","info":"0"},{"code":"        AccountConfig::ROUTES,","info":"1"},{"code":"        Example::ROUTES,","info":"0"},{"code":"        MyScripts::ROUTES,","info":"1"},{"code":"    ]","info":"0"},{"code":");","info":"0"},{"code":"echo $output;","info":"1"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/App.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * App","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class App","info":"0"},{"code":"{","info":"0"},{"code":"    const ROUTE_CACHE_FILE = __DIR__ . '\/..\/route.cache.php';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Invoker $invoker;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Invoker $invoker invoker","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Invoker $invoker)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;invoker = $invoker;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getOutput","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $routeExts routeExts","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getOutput(array $routeExts): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $output = $this-&gt;invoker","info":"1"},{"code":"            -&gt;getInstance(Request::class)","info":"1"},{"code":"            -&gt;setRoutes($this-&gt;getRoutes($routeExts))","info":"1"},{"code":"            -&gt;setError([Error::class, 'error'])","info":"1"},{"code":"            -&gt;process();","info":"1"},{"code":"        \/\/$this-&gt;invoker-&gt;free();","info":"0"},{"code":"        return $output;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getRoutes","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $routeExts routeExts","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function getRoutes(array $routeExts): array","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;loadRouteCache($routeExts);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method loadRouteCache","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $routeExts routeExts","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function loadRouteCache(array $routeExts): array","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!file_exists($this::ROUTE_CACHE_FILE)) {","info":"1"},{"code":"            $this-&gt;createRouteCache($routeExts);","info":"-1"},{"code":"        }","info":"0"},{"code":"        if (!file_exists($this::ROUTE_CACHE_FILE)) {","info":"1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                'Route cache error: ' . $this::ROUTE_CACHE_FILE","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        $routes = $this-&gt;includeRoutes();","info":"1"},{"code":"        if (!$routes) {","info":"1"},{"code":"            $this-&gt;createRouteCache($routeExts);","info":"1"},{"code":"            $routes = $this-&gt;includeRoutes();","info":"1"},{"code":"        }","info":"0"},{"code":"        return $routes;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method includeRoutes","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function includeRoutes(): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $routes = [];","info":"1"},{"code":"        include $this::ROUTE_CACHE_FILE;","info":"1"},{"code":"        return $routes;","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method createRouteCache","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $routeExts routeExts","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function createRouteCache(array $routeExts): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $merger = $this-&gt;invoker-&gt;getInstance(Merger::class);","info":"1"},{"code":"        $routes = [];","info":"1"},{"code":"        foreach ($routeExts as $routeExt) {","info":"1"},{"code":"            $routes = $merger-&gt;merge($routes, $routeExt);","info":"1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;saveRouteCache($routes);","info":"1"},{"code":"        return $routes;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method saveRouteCache","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $routes routes","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function saveRouteCache(array $routes): int","info":"0"},{"code":"    {","info":"0"},{"code":"        $export = var_export($routes, true);","info":"1"},{"code":"        $result = file_put_contents(","info":"1"},{"code":"            $this::ROUTE_CACHE_FILE,","info":"1"},{"code":"            '&lt;?php'","info":"0"},{"code":"                . ' $routes=' . $export . ';'","info":"1"},{"code":"        );","info":"0"},{"code":"        if ($result === false) {","info":"1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                'Unable to write: ' . $this::ROUTE_CACHE_FILE","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        clearstatcache();","info":"1"},{"code":"        return $result;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"86.842105263158"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Config.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Config","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Config extends Section","info":"0"},{"code":"{","info":"0"},{"code":"    const ENV = 'test';","info":"0"},{"code":"    const PATH = __DIR__ . '\/config\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Template $template;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Template $template template","info":"0"},{"code":"     * @param Merger   $merger   merger","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Template $template,","info":"0"},{"code":"        Merger $merger","info":"0"},{"code":"    ) {","info":"0"},{"code":"        $this-&gt;template = $template;","info":"1"},{"code":"        ","info":"0"},{"code":"        $cfg = $this-&gt;readConfig($this::PATH . 'config.ini');","info":"1"},{"code":"        $ext = $this-&gt;readConfig($this::PATH . 'config.' . $this::ENV . '.ini');","info":"1"},{"code":"        $this-&gt;data = $merger-&gt;merge($cfg, $ext);","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method readConfig","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $filename filename","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function readConfig(string $filename): array","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!file_exists($filename)) {","info":"1"},{"code":"            throw new RuntimeException('Config file not found: ' . $filename);","info":"1"},{"code":"        }","info":"0"},{"code":"        $inistr = $this-&gt;template-&gt;process($filename, ['__DIR__' =&gt; __DIR__], '');","info":"1"},{"code":"        $cfg = parse_ini_string($inistr, true);","info":"1"},{"code":"        ","info":"0"},{"code":"        if (false === $cfg) {","info":"1"},{"code":"            throw new RuntimeException('Config error: ' . $filename);","info":"1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        return $cfg;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Crud.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Crud","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Crud","info":"0"},{"code":"{","info":"0"},{"code":"    const LOGICS = ['AND', 'OR'];","info":"0"},{"code":"    const NO_CONDITION_FILTERS = [","info":"0"},{"code":"        'AND' =&gt; '1=0',","info":"0"},{"code":"        'OR' =&gt; '1=1',","info":"0"},{"code":"    ];","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Safer $safer;","info":"0"},{"code":"    protected Mysql $mysql;","info":"0"},{"code":"    protected Session $session;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Safer   $safer   safer","info":"0"},{"code":"     * @param Mysql   $mysql   mysql","info":"0"},{"code":"     * @param Session $session session","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Safer $safer, Mysql $mysql, Session $session)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;safer = $safer;","info":"1"},{"code":"        $this-&gt;mysql = $mysql;","info":"1"},{"code":"        $this-&gt;session = $session;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method row","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string   $tableUnsafe  tableUnsafe","info":"0"},{"code":"     * @param string[] $fieldsUnsafe fieldsUnsafe","info":"0"},{"code":"     * @param string[] $filterUnsafe filterUnsafe","info":"0"},{"code":"     * @param int      $limit        limit","info":"0"},{"code":"     * @param int      $offset       offset","info":"0"},{"code":"     * @param int      $uid          uid","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(","info":"0"},{"code":"        string $tableUnsafe,","info":"0"},{"code":"        array $fieldsUnsafe,","info":"0"},{"code":"        array $filterUnsafe = [],","info":"0"},{"code":"        int $limit = 1,","info":"0"},{"code":"        int $offset = 0,","info":"0"},{"code":"        int $uid = 0","info":"0"},{"code":"    ) {","info":"0"},{"code":"        $table = $this-&gt;mysql-&gt;escape($tableUnsafe);","info":"1"},{"code":"        $mysql = $this-&gt;mysql;","info":"1"},{"code":"        $fields = implode(","info":"1"},{"code":"            ', ',","info":"1"},{"code":"            $this-&gt;safer-&gt;freez(","info":"1"},{"code":"                static function ($value) use ($mysql, $table) {","info":"1"},{"code":"                    return &quot;`$table`.`&quot; . $mysql-&gt;escape($value) . &quot;`&quot;;","info":"1"},{"code":"                },","info":"1"},{"code":"                $fieldsUnsafe","info":"0"},{"code":"            )","info":"0"},{"code":"        );","info":"0"},{"code":"        $query = &quot;SELECT $fields FROM `$table`&quot;;","info":"1"},{"code":"        ","info":"0"},{"code":"        if ($uid &gt; -1) {","info":"1"},{"code":"            if (!$uid) {","info":"1"},{"code":"                $uid = (int)$this-&gt;session-&gt;get('uid');","info":"1"},{"code":"            }","info":"0"},{"code":"            $query .= &quot; JOIN `ownership` &quot;","info":"0"},{"code":"                . &quot;ON `ownership`.`row_id` = `$table`.`id` &quot;","info":"1"},{"code":"                . &quot;AND `ownership`.`table_name` = '$table' &quot;","info":"1"},{"code":"                . &quot;AND `ownership`.`user_id` = $uid&quot;;","info":"1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $query .= $this-&gt;getWhere($table, $filterUnsafe, 'OR');","info":"1"},{"code":"        if ($limit &gt;= 1) {","info":"1"},{"code":"            $query .= &quot; LIMIT $offset, $limit&quot;;","info":"1"},{"code":"        }","info":"0"},{"code":"        if ($limit === 1) {","info":"1"},{"code":"            return $this-&gt;mysql-&gt;selectOne($query);","info":"1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;mysql-&gt;select($query);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getWhere","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string   $table        table","info":"0"},{"code":"     * @param string[] $filterUnsafe filterUnsafe","info":"0"},{"code":"     * @param string   $logic        logic","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function getWhere(","info":"0"},{"code":"        string $table,","info":"0"},{"code":"        array $filterUnsafe,","info":"0"},{"code":"        string $logic","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $filter = $this-&gt;safer-&gt;freez([$this-&gt;mysql, 'escape'], $filterUnsafe);","info":"1"},{"code":"        if (!in_array($logic, self::LOGICS, true)) {","info":"1"},{"code":"            throw new RuntimeException(&quot;Invalid logic: '$logic'&quot;);","info":"1"},{"code":"        }","info":"0"},{"code":"        $query = '';","info":"1"},{"code":"        if ($filter) {","info":"1"},{"code":"            $query .= &quot; WHERE &quot; . $this-&gt;getConditions($table, $filter, $logic);","info":"1"},{"code":"        }","info":"0"},{"code":"        return $query;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getConditions","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string   $table  table","info":"0"},{"code":"     * @param string[] $filter filter","info":"0"},{"code":"     * @param string   $logic  logic","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function getConditions(","info":"0"},{"code":"        string $table,","info":"0"},{"code":"        array $filter,","info":"0"},{"code":"        string $logic","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $conds = [];","info":"1"},{"code":"        foreach ($filter as $key =&gt; $value) {","info":"1"},{"code":"            $conds[] = &quot;`$table`.`$key` = '$value'&quot;;","info":"1"},{"code":"        }","info":"0"},{"code":"        return $conds ?","info":"1"},{"code":"            implode(&quot; $logic &quot;, $conds) :","info":"1"},{"code":"            $this::NO_CONDITION_FILTERS[$logic];","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method add","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string   $tableUnsafe  tableUnsafe","info":"0"},{"code":"     * @param string[] $valuesUnsafe valuesUnsafe","info":"0"},{"code":"     * @param int      $uid          uid","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function add(string $tableUnsafe, array $valuesUnsafe, int $uid = 0): int","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;mysql-&gt;transStart();","info":"1"},{"code":"        ","info":"0"},{"code":"        $ret = $this-&gt;addInsert($tableUnsafe, $valuesUnsafe);","info":"1"},{"code":"        if (!$ret) {","info":"1"},{"code":"            $this-&gt;mysql-&gt;transRollback();","info":"-1"},{"code":"            return 0;","info":"-1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        if ($uid &gt; -1) {","info":"1"},{"code":"            if (!$uid) {","info":"1"},{"code":"                $uid = (int)$this-&gt;session-&gt;get('uid');","info":"1"},{"code":"            }","info":"0"},{"code":"            $oid = $this-&gt;addInsert(","info":"1"},{"code":"                'ownership',","info":"1"},{"code":"                [","info":"0"},{"code":"                    'table_name' =&gt; 'script',","info":"1"},{"code":"                    'row_id' =&gt; (string)$ret,","info":"1"},{"code":"                    'user_id' =&gt; (string)$uid,","info":"1"},{"code":"                ]","info":"0"},{"code":"            );","info":"0"},{"code":"            if (!$oid) {","info":"1"},{"code":"                $this-&gt;mysql-&gt;transRollback();","info":"-1"},{"code":"                return 0;","info":"-1"},{"code":"            }","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $this-&gt;mysql-&gt;transCommit();","info":"1"},{"code":"        ","info":"0"},{"code":"        return $ret;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method addInsert","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string   $tableUnsafe  tableUnsafe","info":"0"},{"code":"     * @param string[] $valuesUnsafe valuesUnsafe","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function addInsert(string $tableUnsafe, array $valuesUnsafe): int","info":"0"},{"code":"    {","info":"0"},{"code":"        $table = $this-&gt;mysql-&gt;escape($tableUnsafe);","info":"1"},{"code":"        $fields = $this-&gt;safer-&gt;freez([$this-&gt;mysql, 'escape'], $valuesUnsafe);","info":"1"},{"code":"        $keys = implode('`, `', array_keys($fields));","info":"1"},{"code":"        $values = implode(&quot;', '&quot;, $fields);","info":"1"},{"code":"        $query = &quot;INSERT INTO `$table` (`$keys`) VALUES ('$values')&quot;;","info":"1"},{"code":"        return $this-&gt;mysql-&gt;insert($query);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method del","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string   $tableUnsafe  tableUnsafe","info":"0"},{"code":"     * @param string[] $filterUnsafe filterUnsafe","info":"0"},{"code":"     * @param int      $limit        limit","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function del(","info":"0"},{"code":"        string $tableUnsafe,","info":"0"},{"code":"        array $filterUnsafe,","info":"0"},{"code":"        int $limit = 1","info":"0"},{"code":"    ): int {","info":"0"},{"code":"        $table = $this-&gt;mysql-&gt;escape($tableUnsafe);","info":"1"},{"code":"        $query = &quot;DELETE FROM `$table`&quot;;","info":"1"},{"code":"        $query .= $this-&gt;getWhere($table, $filterUnsafe, 'AND');","info":"1"},{"code":"        if ($limit) {","info":"1"},{"code":"            $query .= &quot; LIMIT &quot; . $limit;","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;mysql-&gt;delete($query);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method set","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string   $tableUnsafe  tableUnsafe","info":"0"},{"code":"     * @param string[] $valuesUnsafe valuesUnsafe","info":"0"},{"code":"     * @param string[] $filterUnsafe filterUnsafe","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function set(","info":"0"},{"code":"        string $tableUnsafe,","info":"0"},{"code":"        array $valuesUnsafe,","info":"0"},{"code":"        array $filterUnsafe","info":"0"},{"code":"    ): int {","info":"0"},{"code":"        $table = $this-&gt;mysql-&gt;escape($tableUnsafe);","info":"1"},{"code":"        $fields = $this-&gt;safer-&gt;freez([$this-&gt;mysql, 'escape'], $valuesUnsafe);","info":"1"},{"code":"        $sets = [];","info":"1"},{"code":"        foreach ($fields as $key =&gt; $value) {","info":"1"},{"code":"            $sets[] = &quot;`$key` = '$value'&quot;;","info":"1"},{"code":"        }","info":"0"},{"code":"        $setstr = implode(', ', $sets);","info":"1"},{"code":"        $where = $this-&gt;getWhere($table, $filterUnsafe, 'AND');","info":"1"},{"code":"        $query = &quot;UPDATE $table SET $setstr $where LIMIT 1&quot;;","info":"1"},{"code":"        return $this-&gt;mysql-&gt;update($query);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"93.506493506494"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Csrf.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Csrf","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Csrf","info":"0"},{"code":"{","info":"0"},{"code":"    protected ?string $csrf = null;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Session $session;","info":"0"},{"code":"    protected Params $params;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Session $session session","info":"0"},{"code":"     * @param Params  $params  params","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Session $session, Params $params)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;session = $session;","info":"1"},{"code":"        $this-&gt;params = $params;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method get","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;csrf) {","info":"1"},{"code":"            $this-&gt;csrf = (string)rand(100000000, 999999999);","info":"1"},{"code":"            $this-&gt;session-&gt;set('csrf', $this-&gt;csrf);","info":"1"},{"code":"        }","info":"0"},{"code":"        return '&lt;input type=&quot;hidden&quot; name=&quot;csrf&quot; value=&quot;' . $this-&gt;csrf . '&quot;&gt;';","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check(): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $csrf = $this-&gt;session-&gt;get('csrf');","info":"1"},{"code":"        if (!$csrf) {","info":"1"},{"code":"            throw new RuntimeException('CSRF token is missing from session.');","info":"1"},{"code":"        }","info":"0"},{"code":"        $sent = $this-&gt;params-&gt;get('csrf', '');","info":"1"},{"code":"        if (!$sent) {","info":"1"},{"code":"            throw new RuntimeException('CSRF token is not recieved by request.');","info":"1"},{"code":"        }","info":"0"},{"code":"        return $csrf == $sent;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Encrypter.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Encrypter","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Encrypter","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method encrypt","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $password password","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function encrypt(string $password): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return (string)password_hash($password, PASSWORD_BCRYPT, ['cost' =&gt; 12]);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Error.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Error","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Error","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method error","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function error(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return 'Error: Hoops! Something went wrong...';","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Folders.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use FilesystemIterator;","info":"0"},{"code":"use RecursiveDirectoryIterator;","info":"0"},{"code":"use RecursiveIteratorIterator;","info":"0"},{"code":"use SplFileInfo;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Folders","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Folders","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getFilesRecursive","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $path     path","info":"0"},{"code":"     * @param int    $mode     mode","info":"0"},{"code":"     * @param int    $flags    flags","info":"0"},{"code":"     * @param int    $dirflags dirflags","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return SplFileInfo[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getFilesRecursive(","info":"0"},{"code":"        string $path,","info":"0"},{"code":"        int $mode =  RecursiveIteratorIterator::LEAVES_ONLY,","info":"0"},{"code":"        int $flags = 0,","info":"0"},{"code":"        int $dirflags = FilesystemIterator::KEY_AS_PATHNAME |","info":"0"},{"code":"        FilesystemIterator::CURRENT_AS_FILEINFO","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        $diri = new RecursiveDirectoryIterator($path, $dirflags);","info":"1"},{"code":"        $iterator = new RecursiveIteratorIterator($diri, $mode, $flags);","info":"1"},{"code":"        $files = [];","info":"1"},{"code":"        foreach ($iterator as $key =&gt; $file) {","info":"1"},{"code":"            $files[$key] = $file;","info":"1"},{"code":"        }","info":"0"},{"code":"        return $files;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Invoker.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Invoker","info":"0"},{"code":" *","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use ReflectionClass;","info":"0"},{"code":"\/\/use ReflectionException;","info":"0"},{"code":"use ReflectionMethod;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"use function count;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Invoker","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Invoker","info":"0"},{"code":"{","info":"0"},{"code":"    const ERR_ARG_CANT_BE_INSTANTIATED = 'A method has a parameter '","info":"0"},{"code":"            . 'which cannot be instantiated.';","info":"0"},{"code":"    ","info":"0"},{"code":"    const ERR_METHOD_HAS_NONCLASS_ARG = 'Method %s::%s() has one or more '","info":"0"},{"code":"            . 'non-class typed parameters.';","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable instances","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var mixed[] $instances","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected array $instances;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct()","info":"0"},{"code":"    {","info":"0"},{"code":"        $refClass = new ReflectionClass(self::class);","info":"1"},{"code":"        $this-&gt;instances[self::class] = [$this, $refClass];","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method invoke","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[] $route           route","info":"0"},{"code":"     * @param mixed[]  $constructorArgs constructorArgs","info":"0"},{"code":"     * @param mixed[]  $methodArgs      methodArgs","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function invoke(","info":"0"},{"code":"        array $route,","info":"0"},{"code":"        array $constructorArgs = [],","info":"0"},{"code":"        array $methodArgs = []","info":"0"},{"code":"    ) {","info":"0"},{"code":"        $ctrlr = $this-&gt;instance($route[0], $constructorArgs);","info":"1"},{"code":"        if (!isset($route[1])) {","info":"1"},{"code":"            throw new RuntimeException(","info":"1"},{"code":"                'Missing route controller: ' . $route[0] . '::???'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        $method = $ctrlr[1]-&gt;getMethod($route[1]);","info":"1"},{"code":"        $args = $this-&gt;argsMerge(","info":"1"},{"code":"            $method,","info":"1"},{"code":"            $methodArgs,","info":"0"},{"code":"            sprintf(self::ERR_METHOD_HAS_NONCLASS_ARG, $route[0], $route[1])","info":"1"},{"code":"        );","info":"0"},{"code":"        return $ctrlr[0]-&gt;{$route[1]}(...$args);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getInstance","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string  $class           class","info":"0"},{"code":"     * @param mixed[] $constructorArgs constructorArgs","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getInstance(","info":"0"},{"code":"        string $class,","info":"0"},{"code":"        array $constructorArgs = []","info":"0"},{"code":"    ) {","info":"0"},{"code":"        return $this-&gt;instance($class, $constructorArgs)[0];","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method free","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string|null $class class","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function free(?string $class = null): void","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$class) {","info":"1"},{"code":"            foreach (array_keys($this-&gt;instances) as $class) {","info":"1"},{"code":"                if (!is_string($class)) {","info":"1"},{"code":"                    throw new RuntimeException(","info":"1"},{"code":"                        'Class name should be a string, '","info":"0"},{"code":"                            . gettype($class) . ' found.'","info":"1"},{"code":"                    );","info":"0"},{"code":"                }","info":"0"},{"code":"                $this-&gt;free($class);","info":"-1"},{"code":"            }","info":"0"},{"code":"            return;","info":"-1"},{"code":"        }","info":"0"},{"code":"        if ($class != Invoker::class) {","info":"1"},{"code":"            unset($this-&gt;instances[$class]);","info":"1"},{"code":"        }","info":"0"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method instance","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string  $class           class","info":"0"},{"code":"     * @param mixed[] $constructorArgs constructorArgs","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *","info":"0"},{"code":"     * @SuppressWarnings(PHPMD.MissingImport)","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function instance(","info":"0"},{"code":"        string $class,","info":"0"},{"code":"        array $constructorArgs = []","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        if (isset($this-&gt;instances[$class])) {","info":"1"},{"code":"            return $this-&gt;instances[$class];","info":"1"},{"code":"        }","info":"0"},{"code":"        if (!class_exists($class)) {","info":"1"},{"code":"            throw new RuntimeException('Class not exists: &quot;' . $class . '&quot;');","info":"1"},{"code":"        }","info":"0"},{"code":"        $refClass = new ReflectionClass($class);","info":"1"},{"code":"        $constructor = ($refClass)-&gt;getConstructor();","info":"1"},{"code":"        if (!$constructor) {","info":"1"},{"code":"            return $this-&gt;instances[$class] = [new $class, $refClass];","info":"1"},{"code":"        }","info":"0"},{"code":"        $args = $this-&gt;argsMerge(","info":"1"},{"code":"            $constructor,","info":"1"},{"code":"            $constructorArgs,","info":"0"},{"code":"            sprintf(self::ERR_METHOD_HAS_NONCLASS_ARG, $class, '__construct')","info":"1"},{"code":"        );","info":"0"},{"code":"        return $this-&gt;instances[$class] = [new $class(...$args), $refClass];","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method argsMerge","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param ReflectionMethod $method         method","info":"0"},{"code":"     * @param mixed[]          $preArgs        preArgs","info":"0"},{"code":"     * @param string           $messageOnError messageOnError","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function argsMerge(","info":"0"},{"code":"        ReflectionMethod $method,","info":"0"},{"code":"        array $preArgs = [],","info":"0"},{"code":"        string $messageOnError = self::ERR_ARG_CANT_BE_INSTANTIATED","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        return array_merge(","info":"1"},{"code":"            $preArgs,","info":"1"},{"code":"            array_slice(","info":"1"},{"code":"                $this-&gt;getArgs($method, $messageOnError),","info":"1"},{"code":"                count($preArgs)","info":"1"},{"code":"            )","info":"0"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getArgs","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param ReflectionMethod $method         method","info":"0"},{"code":"     * @param string           $messageOnError messageOnError","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function getArgs(","info":"0"},{"code":"        ReflectionMethod $method,","info":"0"},{"code":"        string $messageOnError = self::ERR_ARG_CANT_BE_INSTANTIATED","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        $params = $method-&gt;getParameters();","info":"1"},{"code":"        $args = [];","info":"1"},{"code":"        foreach ($params as $param) {","info":"1"},{"code":"            \/\/$paramClass = null;","info":"0"},{"code":"            \/\/$exception = null;","info":"0"},{"code":"            \/\/            try {","info":"0"},{"code":"            $paramClass = $param-&gt;getClass();","info":"1"},{"code":"            \/\/            } catch (ReflectionException $exc) {","info":"0"},{"code":"            \/\/                $exception = $exc;","info":"0"},{"code":"            \/\/            }","info":"0"},{"code":"            if (\/*!isset($paramClass) || *\/!$paramClass\/* || $exception*\/) {","info":"1"},{"code":"                throw new RuntimeException(","info":"1"},{"code":"                    $messageOnError . &quot; Parameter: &quot; .","info":"1"},{"code":"                        (null !== $param-&gt;getDeclaringClass() ?","info":"1"},{"code":"                            ($param-&gt;getDeclaringClass()-&gt;name ?? '???') : '???')","info":"1"},{"code":"                        . ' =&gt; ' . $param-&gt;getName(),","info":"1"},{"code":"                    0 \/\/,","info":"1"},{"code":"                    \/\/$exception ?? null","info":"0"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            $args[] = $this-&gt;instance($paramClass-&gt;name)[0];","info":"1"},{"code":"        }","info":"0"},{"code":"        return $args;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"96.22641509434"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Json.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Json","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Json","info":"0"},{"code":"{","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method encode","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $data data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function encode($data): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $str = json_encode($data);","info":"1"},{"code":"        if (false === $str) {","info":"1"},{"code":"            throw new RuntimeException($this-&gt;getError($str));","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $str;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method decode","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $json json","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function decode(string $json)","info":"0"},{"code":"    {","info":"0"},{"code":"        $data = json_decode($json);","info":"1"},{"code":"        if (false === $data) {","info":"1"},{"code":"            throw new RuntimeException($this-&gt;getError($data));","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $data;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getError","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $result result","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function getError($result): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $error = 'Could not decode JSON!';","info":"-1"},{"code":"        \/\/Backwards compatability.","info":"0"},{"code":"        if (!function_exists('json_last_error')) {","info":"-1"},{"code":"            return $error;","info":"-1"},{"code":"        }","info":"0"},{"code":"","info":"0"},{"code":"        \/\/Get the last JSON error.","info":"0"},{"code":"        $jsonError = json_last_error();","info":"-1"},{"code":"","info":"0"},{"code":"        \/\/In some cases, this will happen.","info":"0"},{"code":"        if (is_null($result) &amp;&amp; $jsonError == JSON_ERROR_NONE) {","info":"-1"},{"code":"            return $error;","info":"-1"},{"code":"        }","info":"0"},{"code":"","info":"0"},{"code":"        \/\/If an error exists.","info":"0"},{"code":"        if ($jsonError != JSON_ERROR_NONE) {","info":"-1"},{"code":"            $error .= ' ' . $this-&gt;getErrorDetails($jsonError);","info":"-1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        return $error;","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getErrorDetails","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $jsonError jsonError","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function getErrorDetails($jsonError): string","info":"0"},{"code":"    {","info":"0"},{"code":"        \/\/Use a switch statement to figure out the exact error.","info":"0"},{"code":"        switch ($jsonError) {","info":"0"},{"code":"        case JSON_ERROR_DEPTH:","info":"-1"},{"code":"            return 'Maximum depth exceeded!';","info":"-1"},{"code":"                ","info":"0"},{"code":"        case JSON_ERROR_STATE_MISMATCH:","info":"-1"},{"code":"            return 'Underflow or the modes mismatch!';","info":"-1"},{"code":"        case JSON_ERROR_CTRL_CHAR:","info":"-1"},{"code":"            return 'Unexpected control character found';","info":"-1"},{"code":"        case JSON_ERROR_SYNTAX:","info":"-1"},{"code":"            return 'Malformed JSON';","info":"-1"},{"code":"        case JSON_ERROR_UTF8:","info":"-1"},{"code":"            return 'Malformed UTF-8 characters found!';","info":"-1"},{"code":"        }","info":"0"},{"code":"            ","info":"0"},{"code":"        return 'Unknown error!';","info":"-1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"24.137931034483"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Logger.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use Exception;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"use Throwable;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Logger","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Logger","info":"0"},{"code":"{","info":"0"},{"code":"    const LOG_FILE = __DIR__ . '\/log\/app.log';","info":"0"},{"code":"    const CH_ERROR = 'error';","info":"0"},{"code":"    const CH_WARNING = 'warning';","info":"0"},{"code":"    const CH_INFO = 'info';","info":"0"},{"code":"    const CH_DEBUG = 'debug';","info":"0"},{"code":"    const CH_TEST = 'test';","info":"0"},{"code":"    const CH_FAIL = 'fail';","info":"0"},{"code":"    const CH_EXCEPTION = 'exception';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable channels","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var string[] $channels","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected array $channels = [];","info":"0"},{"code":"    ","info":"0"},{"code":"    protected bool $collect = false;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $collection","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var string[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected array $collection = [];","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method setChannels","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[] $channels channels","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function setChannels(array $channels): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;channels = $channels;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getChannels","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getChannels(): array","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;channels;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method setCollect","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param bool $collect collect","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function setCollect(bool $collect): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;collect = $collect;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method isCollect","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function isCollect(): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;collect;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getCollection","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getCollection(): array","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;collection;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method setCollection","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[] $collection collection","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function setCollection(array $collection = []): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;collection = $collection;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method clearCollection","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function clearCollection(): self","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;setCollection([]);","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method error","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $msg msg","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function error(string $msg): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;log(Logger::CH_ERROR, $msg);","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method warning","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $msg msg","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function warning(string $msg): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;log(Logger::CH_WARNING, $msg);","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method info","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $msg msg","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function info(string $msg): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;log(Logger::CH_INFO, $msg);","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method debug","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $msg msg","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function debug(string $msg): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;log(Logger::CH_DEBUG, $msg);","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method test","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $msg msg","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function test(string $msg): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;log(Logger::CH_TEST, $msg);","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method fail","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $msg msg","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function fail(string $msg): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;log(Logger::CH_FAIL, $msg);","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method exception","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Exception $exception  exception","info":"0"},{"code":"     * @param string    $infoPrefix infoPrefix","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function exception(","info":"0"},{"code":"        Exception $exception,","info":"0"},{"code":"        string $infoPrefix = &quot;Exception occured: &quot;","info":"0"},{"code":"    ): void {","info":"0"},{"code":"        $this-&gt;log(","info":"1"},{"code":"            Logger::CH_EXCEPTION,","info":"1"},{"code":"            $infoPrefix . $this-&gt;exceptionToString($exception)","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method exceptionToString","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Throwable $exception exception","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function exceptionToString(Throwable $exception): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $class = get_class($exception);","info":"1"},{"code":"        $code = $exception-&gt;getCode();","info":"1"},{"code":"        $file = $exception-&gt;getFile();","info":"1"},{"code":"        $line = $exception-&gt;getLine();","info":"1"},{"code":"        $msg = $exception-&gt;getMessage();","info":"1"},{"code":"        $trace = $exception-&gt;getTraceAsString();","info":"1"},{"code":"        $prev =$exception-&gt;getPrevious();","info":"1"},{"code":"        $string = &quot;$class (code: $code) at $file:$line\\n&quot;","info":"1"},{"code":"                . &quot;Message: '$msg'\\n&quot;","info":"1"},{"code":"                . &quot;Trace:\\n$trace&quot;;","info":"1"},{"code":"        if ($prev) {","info":"1"},{"code":"            $prevString = $this-&gt;exceptionToString($prev);","info":"1"},{"code":"            $string .= &quot;\\nPrevious reason:\\n$prevString&quot;;","info":"1"},{"code":"        }","info":"0"},{"code":"        return $string;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method doLog","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $channel channel","info":"0"},{"code":"     * @param string $msg     msg","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function log(string $channel, string $msg): void","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;channels || in_array($channel, $this-&gt;channels, true)) {","info":"1"},{"code":"            $fullmsg = &quot;[&quot; . date(&quot;Y-m-d H:i:s&quot;) . &quot;] [$channel] $msg&quot;;","info":"1"},{"code":"            if ($this-&gt;collect) {","info":"1"},{"code":"                $this-&gt;collection[] = $fullmsg;","info":"1"},{"code":"                return;","info":"1"},{"code":"            }","info":"0"},{"code":"            if (false === file_put_contents(","info":"1"},{"code":"                $this::LOG_FILE,","info":"1"},{"code":"                &quot;$fullmsg\\n&quot;,","info":"1"},{"code":"                FILE_APPEND","info":"1"},{"code":"            )","info":"0"},{"code":"            ) {","info":"0"},{"code":"                throw new RuntimeException(","info":"1"},{"code":"                    &quot;Log file error, (&quot; . $this::LOG_FILE .","info":"1"},{"code":"                        &quot;) message is not logged: $fullmsg&quot;","info":"1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"        }","info":"0"},{"code":"    }","info":"1"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Mailer.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Mailer","info":"0"},{"code":" *","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) all right reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use Exception;","info":"0"},{"code":"use PHPMailer\\PHPMailer\\PHPMailer;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"use function date;","info":"0"},{"code":"use function file_exists;","info":"0"},{"code":"use function file_put_contents;","info":"0"},{"code":"use function is_dir;","info":"0"},{"code":"use function mkdir;","info":"0"},{"code":"use function strip_tags;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Mailer","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) all right reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Mailer","info":"0"},{"code":"{","info":"0"},{"code":"    const CONFIG_SECION = 'Mailer';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Section $section;","info":"0"},{"code":"    protected Logger $logger;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Config $config config","info":"0"},{"code":"     * @param Logger $logger logger","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Config $config, Logger $logger)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;logger = $logger;","info":"1"},{"code":"        $this-&gt;section = $config-&gt;get(self::CONFIG_SECION);","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method send","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $addressTo addressTo","info":"0"},{"code":"     * @param string $subject   subject","info":"0"},{"code":"     * @param string $body      body","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function send(","info":"0"},{"code":"        string $addressTo,","info":"0"},{"code":"        string $subject,","info":"0"},{"code":"        string $body","info":"0"},{"code":"    ): bool {","info":"0"},{"code":"        \/\/ Instantiation and passing `true` enables exceptions","info":"0"},{"code":"        $mail = new PHPMailer(true);","info":"1"},{"code":"","info":"0"},{"code":"        try {","info":"0"},{"code":"            \/\/Server settings","info":"0"},{"code":"            ","info":"0"},{"code":"            \/\/ Enable verbose debug output","info":"0"},{"code":"            \/\/$mail-&gt;SMTPDebug = SMTP::DEBUG_SERVER;","info":"0"},{"code":"            ","info":"0"},{"code":"            \/\/ Send using SMTP","info":"0"},{"code":"            $mail-&gt;isSMTP();","info":"1"},{"code":"            ","info":"0"},{"code":"            \/\/ Set the SMTP server to send through","info":"0"},{"code":"            $mail-&gt;Host       = $this-&gt;section-&gt;get('host');","info":"1"},{"code":"            ","info":"0"},{"code":"            \/\/ Enable SMTP authentication","info":"0"},{"code":"            $mail-&gt;SMTPAuth   = true;","info":"1"},{"code":"            ","info":"0"},{"code":"            \/\/ SMTP username","info":"0"},{"code":"            $mail-&gt;Username   = $this-&gt;section-&gt;get('user');","info":"1"},{"code":"            ","info":"0"},{"code":"            \/\/ SMTP password","info":"0"},{"code":"            $mail-&gt;Password   = $this-&gt;section-&gt;get('secret');","info":"1"},{"code":"            ","info":"0"},{"code":"            \/\/ Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` encouraged","info":"0"},{"code":"            $mail-&gt;SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS;","info":"1"},{"code":"            ","info":"0"},{"code":"            \/\/ TCP port to connect to,","info":"0"},{"code":"            \/\/ use 465 for `PHPMailer::ENCRYPTION_SMTPS` above","info":"0"},{"code":"            $mail-&gt;Port       = $this-&gt;section-&gt;get('port');","info":"1"},{"code":"","info":"0"},{"code":"            \/\/Recipients","info":"0"},{"code":"            $mail-&gt;setFrom(","info":"1"},{"code":"                $this-&gt;section-&gt;get('system_email'),","info":"1"},{"code":"                $this-&gt;section-&gt;get('system_from')","info":"1"},{"code":"            );","info":"0"},{"code":"            ","info":"0"},{"code":"            \/\/ Add a recipient","info":"0"},{"code":"            $mail-&gt;addAddress($addressTo);","info":"1"},{"code":"            ","info":"0"},{"code":"            $mail-&gt;addReplyTo(","info":"1"},{"code":"                $this-&gt;section-&gt;get('noreply_email'),","info":"1"},{"code":"                $this-&gt;section-&gt;get('noreply_name')","info":"1"},{"code":"            );","info":"0"},{"code":"            \/\/ $mail-&gt;addCC('cc@example.com');","info":"0"},{"code":"            \/\/ $mail-&gt;addBCC('bcc@example.com');","info":"0"},{"code":"","info":"0"},{"code":"            \/\/ Attachments","info":"0"},{"code":"            ","info":"0"},{"code":"            \/\/ Add attachments","info":"0"},{"code":"            \/\/ $mail-&gt;addAttachment('\/var\/tmp\/file.tar.gz');","info":"0"},{"code":"            \/\/","info":"0"},{"code":"            \/\/ \/\/ Optional name","info":"0"},{"code":"            \/\/ $mail-&gt;addAttachment('\/tmp\/image.jpg', 'new.jpg');","info":"0"},{"code":"","info":"0"},{"code":"            \/\/ Content","info":"0"},{"code":"            ","info":"0"},{"code":"            \/\/ Set email format to HTML","info":"0"},{"code":"            $mail-&gt;isHTML(true);","info":"1"},{"code":"            $mail-&gt;Subject = $subject;","info":"1"},{"code":"            $mail-&gt;Body    = $body;","info":"1"},{"code":"            $mail-&gt;AltBody = strip_tags($body);","info":"1"},{"code":"            if ($this-&gt;section-&gt;get('send_mail')) {","info":"1"},{"code":"                $mail-&gt;send();","info":"-1"},{"code":"                $this-&gt;logger-&gt;info(","info":"-1"},{"code":"                    &quot;Email sent to: $addressTo\\nSubject: $subject\\nBody:\\n$body\\n\\n&quot;","info":"-1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            if ($this-&gt;section-&gt;get('save_mail')) {","info":"1"},{"code":"                $this-&gt;saveMail($addressTo, $subject, $body);","info":"1"},{"code":"            }","info":"0"},{"code":"            return true;","info":"1"},{"code":"        } catch (Exception $e) {","info":"-1"},{"code":"            $this-&gt;logger-&gt;error(","info":"-1"},{"code":"                &quot;Message could not be sent. Mailer Error: {$mail-&gt;ErrorInfo}\\n&quot;","info":"-1"},{"code":"                    . &quot;Exception message:&quot; . $e-&gt;getMessage() . &quot;\\n&quot;","info":"-1"},{"code":"                    . &quot;Trace:\\n&quot; . $e-&gt;getTraceAsString()","info":"-1"},{"code":"            );","info":"0"},{"code":"            return false;","info":"-1"},{"code":"        }","info":"0"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method saveMail","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $addressTo addressTo","info":"0"},{"code":"     * @param string $subject   subject","info":"0"},{"code":"     * @param string $body      body","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function saveMail(","info":"0"},{"code":"        string $addressTo,","info":"0"},{"code":"        string $subject,","info":"0"},{"code":"        string $body","info":"0"},{"code":"    ): bool {","info":"0"},{"code":"        if ((!file_exists($this-&gt;section-&gt;get('save_mail_path'))","info":"1"},{"code":"            || !is_dir($this-&gt;section-&gt;get('save_mail_path')))","info":"1"},{"code":"            &amp;&amp; !mkdir(","info":"-1"},{"code":"                $this-&gt;section-&gt;get('save_mail_path'),","info":"-1"},{"code":"                $this-&gt;section-&gt;get('save_mail_mode'),","info":"-1"},{"code":"                true","info":"1"},{"code":"            )","info":"0"},{"code":"        ) {","info":"0"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                &quot;Folder creation error: &quot; . $this-&gt;section-&gt;get('save_mail_path')","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        $fname = $this-&gt;section-&gt;get('save_mail_path') .","info":"1"},{"code":"                        date(&quot;Y-m-s H-i-s&quot;) . &quot; to $addressTo ($subject).html&quot;;","info":"1"},{"code":"        if (file_put_contents($fname, $body)) {","info":"1"},{"code":"            $this-&gt;logger-&gt;info(&quot;Email saved to: $fname&quot;);","info":"1"},{"code":"            return true;","info":"1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;logger-&gt;error(&quot;Message could not be saved to: $fname&quot;);","info":"-1"},{"code":"        return false;","info":"-1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"68"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Merger.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Merger","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Merger","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method merge","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $arr1 arr1","info":"0"},{"code":"     * @param mixed[] $arr2 arr2","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppressWarnings(PHPMD.CyclomaticComplexity)","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function merge(array $arr1, array $arr2): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $merg = $arr1;","info":"1"},{"code":"","info":"0"},{"code":"        foreach ($arr2 as $key =&gt; $value) {","info":"1"},{"code":"            if (isset($merg[$key]) &amp;&amp; is_array($merg[$key]) &amp;&amp; is_array($value)) {","info":"1"},{"code":"                $merg[$key] = $this-&gt;merge($merg[$key], $value);","info":"1"},{"code":"                continue;","info":"1"},{"code":"            }","info":"0"},{"code":"            ","info":"0"},{"code":"            if (is_string($key)","info":"1"},{"code":"                &amp;&amp; (!isset($merg[$key])","info":"1"},{"code":"                || !(is_array($merg[$key]) &amp;&amp; is_array($value)))","info":"1"},{"code":"            ) {","info":"0"},{"code":"                $merg[$key] = $value;","info":"1"},{"code":"                continue;","info":"1"},{"code":"            }","info":"0"},{"code":"            ","info":"0"},{"code":"            if (is_numeric($key) &amp;&amp; !in_array($value, $merg, true)) {","info":"1"},{"code":"                $merg[] = $value;","info":"1"},{"code":"                continue;","info":"1"},{"code":"            }","info":"0"},{"code":"        }","info":"0"},{"code":"","info":"0"},{"code":"        return $merg;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Messages.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Messages","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Messages","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE_TYPES = ['success', 'alert', 'warning', 'info', 'error', 'debug'];","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $messages","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected array $messages = [];","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method add","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $type    type","info":"0"},{"code":"     * @param string $message message","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function add(string $type, string $message): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;validateMessageType($type);","info":"1"},{"code":"        if (!isset($this-&gt;messages[$type])) {","info":"1"},{"code":"            $this-&gt;messages[$type] = [];","info":"1"},{"code":"        }","info":"0"},{"code":"        if (!in_array($message, $this-&gt;messages[$type], true)) {","info":"1"},{"code":"            $this-&gt;messages[$type][] = $message;","info":"1"},{"code":"        }","info":"0"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method validateMessageType","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $type type","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function validateMessageType(string $type): void","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!in_array($type, $this::MESSAGE_TYPES, true)) {","info":"1"},{"code":"            throw new RuntimeException(&quot;Invalid message type: '$type'&quot;);","info":"-1"},{"code":"        }","info":"0"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method get","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(): array","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;messages;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"90.909090909091"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Mysql.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use mysqli;","info":"0"},{"code":"use mysqli_result;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Mysql","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Mysql","info":"0"},{"code":"{","info":"0"},{"code":"    const HOST = 'localhost';","info":"0"},{"code":"    const USER = 'user';","info":"0"},{"code":"    const PASSWORD = 'password';","info":"0"},{"code":"    const DATABASE = 'talkbot';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected mysqli $mysqli;","info":"0"},{"code":"    protected bool $connected = false;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method transStart","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function transStart(): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;connect();","info":"1"},{"code":"        if (!$this-&gt;mysqli-&gt;autocommit(false)) {","info":"1"},{"code":"            throw new RuntimeException('Mysql transaction start failed.');","info":"-1"},{"code":"        }","info":"0"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method transCommit","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function transCommit(): void","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;mysqli-&gt;commit()) {","info":"1"},{"code":"            throw new RuntimeException('Mysql transaction commit failed.');","info":"-1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;transStop();","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method transRollback","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function transRollback(): void","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;mysqli-&gt;rollback()) {","info":"-1"},{"code":"            throw new RuntimeException('Mysql transaction rollback failed.');","info":"-1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;transStop();","info":"-1"},{"code":"    }","info":"-1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method transStop","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function transStop(): void","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;mysqli-&gt;autocommit(true)) {","info":"1"},{"code":"            throw new RuntimeException('Mysql transaction stop failed.');","info":"-1"},{"code":"        }","info":"0"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method connect","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function connect(): void","info":"0"},{"code":"    {","info":"0"},{"code":"        if ($this-&gt;connected) {","info":"1"},{"code":"            return;","info":"1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;mysqli = new mysqli(","info":"1"},{"code":"            self::HOST,","info":"1"},{"code":"            self::USER,","info":"1"},{"code":"            self::PASSWORD,","info":"1"},{"code":"            self::DATABASE","info":"1"},{"code":"        );","info":"0"},{"code":"        if ($this-&gt;mysqli-&gt;connect_error) {","info":"1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                'MySQL connection error: (' . $this-&gt;mysqli-&gt;connect_errno . ')' .","info":"-1"},{"code":"                    $this-&gt;mysqli-&gt;connect_error","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        $this-&gt;connected = true;","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method escape","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function escape(string $value): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;connect();","info":"1"},{"code":"        return $this-&gt;mysqli-&gt;escape_string($value);","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method selectOne","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $query query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return Row","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function selectOne(string $query): Row","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;connect();","info":"1"},{"code":"        $result = $this-&gt;mysqli-&gt;query($query);","info":"1"},{"code":"        if ($result instanceof mysqli_result) {","info":"1"},{"code":"            return (new Row())-&gt;setFields($result-&gt;fetch_assoc() ?: []);","info":"1"},{"code":"        }","info":"0"},{"code":"        throw new RuntimeException(","info":"-1"},{"code":"            &quot;MySQL query error:\\n$query\\nMessage: {$this-&gt;mysqli-&gt;error}&quot;","info":"-1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method select","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $query query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return Row[]","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function select(string $query): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;connect();","info":"1"},{"code":"        $result = $this-&gt;mysqli-&gt;query($query);","info":"1"},{"code":"        if ($result instanceof mysqli_result) {","info":"1"},{"code":"            $rows = [];","info":"1"},{"code":"            while ($row = $result-&gt;fetch_assoc()) {","info":"1"},{"code":"                $rows[] = (new Row())-&gt;setFields($row);","info":"1"},{"code":"            }","info":"0"},{"code":"            return $rows;","info":"1"},{"code":"        }","info":"0"},{"code":"        throw new RuntimeException(","info":"-1"},{"code":"            &quot;MySQL query error:\\n$query\\nMessage: {$this-&gt;mysqli-&gt;error}&quot;","info":"-1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $query query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function query(string $query): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;connect();","info":"1"},{"code":"        $ret = (bool)$this-&gt;mysqli-&gt;query($query);","info":"1"},{"code":"        if ($ret) {","info":"1"},{"code":"            return $ret;","info":"1"},{"code":"        }","info":"0"},{"code":"        throw new RuntimeException(","info":"-1"},{"code":"            &quot;MySQL query error:\\n$query\\nMessage: {$this-&gt;mysqli-&gt;error}&quot;","info":"-1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method update","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $query query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function update(string $query): int","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;query($query)) {","info":"1"},{"code":"            return 0;","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;mysqli-&gt;affected_rows;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method delete","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $query query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function delete(string $query): int","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;update($query);","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method insert","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $query query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return int","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function insert(string $query): int","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;query($query)) {","info":"1"},{"code":"            return 0;","info":"-1"},{"code":"        }","info":"0"},{"code":"        return (int)$this-&gt;mysqli-&gt;insert_id;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"68.965517241379"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Params.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Params","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *","info":"0"},{"code":" * @SuppressWarnings(PHPMD.Superglobals)","info":"0"},{"code":" *\/","info":"0"},{"code":"class Params extends Server implements Assoc","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method get","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key     key","info":"0"},{"code":"     * @param mixed  $default default","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(string $key, $default = null)","info":"0"},{"code":"    {","info":"0"},{"code":"        $method = parent::get('REQUEST_METHOD');","info":"1"},{"code":"        switch ($method) {","info":"1"},{"code":"        case 'GET':","info":"1"},{"code":"            if (isset($_GET[$key])) {","info":"1"},{"code":"                return $_GET[$key];","info":"1"},{"code":"            }","info":"0"},{"code":"            break;","info":"1"},{"code":"        ","info":"0"},{"code":"        case 'POST':","info":"1"},{"code":"            if (isset($_POST[$key])) {","info":"1"},{"code":"                return $_POST[$key];","info":"1"},{"code":"            }","info":"0"},{"code":"            break;","info":"1"},{"code":"        default:","info":"0"},{"code":"            throw new RuntimeException('Incorrect method: &quot;' . $method . '&quot;');","info":"-1"},{"code":"        }","info":"0"},{"code":"        if (isset($_REQUEST[$key])) {","info":"1"},{"code":"            return $_REQUEST[$key];","info":"1"},{"code":"        }","info":"0"},{"code":"        if (null !== $default) {","info":"1"},{"code":"            return $default;","info":"1"},{"code":"        }","info":"0"},{"code":"        throw new RuntimeException('Parameter not found: &quot;' . $key . '&quot;');","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method has","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function has(string $key): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $method = parent::get('REQUEST_METHOD');","info":"-1"},{"code":"        switch ($method) {","info":"-1"},{"code":"        case 'GET':","info":"-1"},{"code":"            if (isset($_GET[$key])) {","info":"-1"},{"code":"                return true;","info":"-1"},{"code":"            }","info":"0"},{"code":"            break;","info":"-1"},{"code":"        ","info":"0"},{"code":"        case 'POST':","info":"-1"},{"code":"            if (isset($_POST[$key])) {","info":"-1"},{"code":"                return true;","info":"-1"},{"code":"            }","info":"0"},{"code":"            break;","info":"-1"},{"code":"        default:","info":"0"},{"code":"            throw new RuntimeException('Incorrect method: &quot;' . $method . '&quot;');","info":"-1"},{"code":"        }","info":"0"},{"code":"        if (isset($_REQUEST[$key])) {","info":"-1"},{"code":"            return true;","info":"-1"},{"code":"        }","info":"0"},{"code":"        return false;","info":"-1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method set","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key   key","info":"0"},{"code":"     * @param mixed  $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function set(string $key, $value): Assoc","info":"0"},{"code":"    {","info":"0"},{"code":"        throw new RuntimeException(","info":"-1"},{"code":"            &quot;Parameters are not accessible, &quot;","info":"0"},{"code":"                . &quot;attempted to override '$key' =&gt; '$value'.&quot;","info":"-1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"43.75"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Request.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use Exception;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Request","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Request","info":"0"},{"code":"{","info":"0"},{"code":"    const QUERY_KEY = 'q';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $routes","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var string[][][][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected array $routes;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $notFound","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var string[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected array $error;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Invoker $invoker;","info":"0"},{"code":"    protected Logger $logger;","info":"0"},{"code":"    protected User $user;","info":"0"},{"code":"    protected Server $server;","info":"0"},{"code":"    protected Params $params;","info":"0"},{"code":"    \/\/    protected Json $json;","info":"0"},{"code":"    protected Csrf $csrf;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Invoker $invoker invoker","info":"0"},{"code":"     * @param Logger  $logger  logger","info":"0"},{"code":"     * @param User    $user    user","info":"0"},{"code":"     * @param Server  $server  server","info":"0"},{"code":"     * @param Params  $params  params","info":"0"},{"code":"     *                         @ param Json    $json    json","info":"0"},{"code":"     * @param Csrf    $csrf    csrf","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Invoker $invoker,","info":"0"},{"code":"        Logger $logger,","info":"0"},{"code":"        User $user,","info":"0"},{"code":"        Server $server,","info":"0"},{"code":"        Params $params,","info":"0"},{"code":"        \/\/        Json $json,","info":"0"},{"code":"        Csrf $csrf","info":"0"},{"code":"    ) {","info":"0"},{"code":"        $this-&gt;invoker = $invoker;","info":"1"},{"code":"        $this-&gt;logger = $logger;","info":"1"},{"code":"        $this-&gt;user = $user;","info":"1"},{"code":"        $this-&gt;server = $server;","info":"1"},{"code":"        $this-&gt;params = $params;","info":"1"},{"code":"        \/\/        $this-&gt;json = $json;","info":"0"},{"code":"        $this-&gt;csrf = $csrf;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method setRoutes","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[][][][] $routes routes","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function setRoutes(array $routes): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;routes = $routes;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method setError","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[] $error error","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function setError(array $error): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;error = $error;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"      ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method process","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function process(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        try {","info":"0"},{"code":"            $area = $this-&gt;user-&gt;isVisitor() ? 'public' : 'protected';","info":"1"},{"code":"            $method = $this-&gt;server-&gt;get('REQUEST_METHOD');","info":"1"},{"code":"            if ($method === 'POST' &amp;&amp; !$this-&gt;csrf-&gt;check()) {","info":"1"},{"code":"                throw new RuntimeException('CSRF token mismatch.');","info":"-1"},{"code":"            }","info":"0"},{"code":"            $query = $this-&gt;params-&gt;get(self::QUERY_KEY, '');","info":"1"},{"code":"            $response = $this-&gt;call($area, $method, $query);","info":"1"},{"code":"        } catch (Exception $exception) {","info":"1"},{"code":"            $this-&gt;logger-&gt;exception($exception);","info":"1"},{"code":"            $response = $this-&gt;invoker-&gt;invoke($this-&gt;error);","info":"1"},{"code":"        }","info":"0"},{"code":"        \/\/        if (is_array($response)) {","info":"0"},{"code":"        \/\/            return $this-&gt;json-&gt;encode($response);","info":"0"},{"code":"        \/\/        }","info":"0"},{"code":"        return $response;","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method call","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $area   area","info":"0"},{"code":"     * @param string $method method","info":"0"},{"code":"     * @param string $query  query","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function call(string $area, string $method, string $query)","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!isset($this-&gt;routes[$area])","info":"1"},{"code":"            || !isset($this-&gt;routes[$area][$method])","info":"1"},{"code":"            || !isset($this-&gt;routes[$area][$method][$query])","info":"1"},{"code":"        ) {","info":"0"},{"code":"            throw new RuntimeException(","info":"1"},{"code":"                &quot;Route not found for requested area: '$area', &quot;","info":"1"},{"code":"                    . &quot;method: '$method', &quot;","info":"1"},{"code":"                    . &quot;query: '&quot; . self::QUERY_KEY . &quot;=$query'&quot;","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;invoker-&gt;invoke($this-&gt;routes[$area][$method][$query]);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"96.666666666667"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/AbstractResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * AbstractResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"abstract class AbstractResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const LBL_SUCCESS = 'Operation success';","info":"0"},{"code":"    const LBL_ERROR = 'Operation failed';","info":"0"},{"code":"    const LBL_WARNING = 'Operation success but some errors occurred';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Messages $messages;","info":"0"},{"code":"    protected Merger $merger;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages $messages messages","info":"0"},{"code":"     * @param Merger   $merger   merger","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Messages $messages, Merger $merger)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;messages = $messages;","info":"1"},{"code":"        $this-&gt;merger = $merger;","info":"1"},{"code":"    }","info":"1"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/AccountConfig.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\Template\\ActivateTemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\Template\\LoginTemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\Template\\LogoutTemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\Template\\PasswordChangeTemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\Template\\PasswordResetTemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\Template\\RegistryTemplateResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * AccountConfig","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"abstract class AccountConfig","info":"0"},{"code":"{","info":"0"},{"code":"    const ROUTES = [","info":"0"},{"code":"        'public' =&gt; [","info":"0"},{"code":"            'GET' =&gt; [","info":"0"},{"code":"                '' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    LoginTemplateResponder::class,","info":"0"},{"code":"                    'getLoginFormResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'login' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    LoginTemplateResponder::class,","info":"0"},{"code":"                    'getLoginFormResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'registry' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    RegistryTemplateResponder::class,","info":"0"},{"code":"                    'getRegistryFormResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'resend' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    RegistryTemplateResponder::class,","info":"0"},{"code":"                    'getResendResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'activate' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    ActivateTemplateResponder::class,","info":"0"},{"code":"                    'getActivateResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'reset' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    PasswordResetTemplateResponder::class,","info":"0"},{"code":"                    'getPasswordResetFormResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"            ],","info":"0"},{"code":"            'POST' =&gt; [","info":"0"},{"code":"                '' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    LoginTemplateResponder::class,","info":"0"},{"code":"                    'getLoginResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'login' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    LoginTemplateResponder::class,","info":"0"},{"code":"                    'getLoginResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'registry' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    RegistryTemplateResponder::class,","info":"0"},{"code":"                    'getRegistryResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'reset' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    PasswordResetTemplateResponder::class,","info":"0"},{"code":"                    'getPasswordResetRequestResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"                'change' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    PasswordChangeTemplateResponder::class,","info":"0"},{"code":"                    'getPasswordChangeResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"            ],","info":"0"},{"code":"        ],","info":"0"},{"code":"        'protected' =&gt; [","info":"0"},{"code":"            'GET' =&gt; [","info":"0"},{"code":"                'logout' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    LogoutTemplateResponder::class,","info":"0"},{"code":"                    'getLogoutResponse'","info":"0"},{"code":"                ],","info":"0"},{"code":"            ],","info":"0"},{"code":"        ],","info":"0"},{"code":"    ];","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/AccountValidator.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Assoc;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\Email;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\Mandatory;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\Match;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\Number;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\Password;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\PasswordVerify;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\Sleep;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Validator;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * AccountValidator","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class AccountValidator extends Validator","info":"1"},{"code":"{","info":"0"},{"code":"    const LOGIN_DELAY = 0; \/\/ TODO: set to 3;","info":"0"},{"code":"    ","info":"0"},{"code":"    const PASSWORD_VALIDATION = [","info":"0"},{"code":"        'minLength' =&gt; ['min' =&gt; 8,],","info":"0"},{"code":"        'checkMinLength' =&gt; true,","info":"0"},{"code":"        'checkHasLower' =&gt; true,","info":"0"},{"code":"        'checkHasUpper' =&gt; true,","info":"0"},{"code":"        'checkHasNumber' =&gt; true,","info":"0"},{"code":"        'checkHasSpecChar' =&gt; true,","info":"0"},{"code":"    ];","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method validateLogin","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function validateLogin(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;getErrors(","info":"1"},{"code":"            [","info":"0"},{"code":"                'delay' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    'value' =&gt; $this::LOGIN_DELAY,","info":"1"},{"code":"                    'rules' =&gt;","info":"0"},{"code":"                    [","info":"0"},{"code":"                        \/\/Mandatory::class =&gt; null, \/\/ TODO add it on live","info":"0"},{"code":"                        Sleep::class =&gt; null,","info":"0"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"            ]","info":"0"},{"code":"        );","info":"0"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $errors;","info":"1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $errors = $this-&gt;getFirstError(","info":"1"},{"code":"            [","info":"0"},{"code":"                'email' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $params-&gt;get('email', ''),","info":"1"},{"code":"                    'rules' =&gt; [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Email::class =&gt; null,","info":"0"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"                'password' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $params-&gt;get('password', ''),","info":"1"},{"code":"                    'rules' =&gt; [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Password::class =&gt; self::PASSWORD_VALIDATION","info":"1"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"            ]","info":"0"},{"code":"        );","info":"0"},{"code":"        ","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method validateUser","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc  $user     user","info":"0"},{"code":"     * @param string $password password","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function validateUser(Assoc $user, string $password): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;getErrors(","info":"1"},{"code":"            [","info":"0"},{"code":"                'id' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    'value' =&gt; $user-&gt;get('id', ''),","info":"1"},{"code":"                    'rules' =&gt;","info":"0"},{"code":"                    [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Number::class =&gt; null,","info":"0"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"                'email' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    'value' =&gt; $user-&gt;get('email', ''),","info":"1"},{"code":"                    'rules' =&gt;","info":"0"},{"code":"                    [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Email::class =&gt; null,","info":"0"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"                'hash' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    'value' =&gt; $user-&gt;get('hash', ''),","info":"1"},{"code":"                    'rules' =&gt;","info":"0"},{"code":"                    [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        PasswordVerify::class =&gt; ['password' =&gt; $password],","info":"1"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"            ]","info":"0"},{"code":"        );","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method validateRegistry","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function validateRegistry(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $email = $params-&gt;get('email', '');","info":"1"},{"code":"        ","info":"0"},{"code":"        $errors = $this-&gt;getErrors(","info":"1"},{"code":"            [","info":"0"},{"code":"                'email' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    'value' =&gt; $email,","info":"1"},{"code":"                    'rules' =&gt;","info":"0"},{"code":"                    [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Email::class =&gt; null,","info":"0"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"                'password' =&gt;","info":"0"},{"code":"                [","info":"0"},{"code":"                    'value' =&gt; $params-&gt;get('password', ''),","info":"1"},{"code":"                    'rules' =&gt;","info":"0"},{"code":"                    [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Password::class =&gt; self::PASSWORD_VALIDATION,","info":"1"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"                'email_retype' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $params-&gt;get('email_retype', ''),","info":"1"},{"code":"                    'rules' =&gt; [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Match::class =&gt; ['equalTo' =&gt; $email],","info":"1"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"            ],","info":"0"},{"code":"        );","info":"0"},{"code":"        ","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method validateActivate","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function validateActivate(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;getErrors(","info":"1"},{"code":"            [","info":"0"},{"code":"            'token' =&gt; [","info":"0"},{"code":"                'value' =&gt; $params-&gt;get('token', ''),","info":"1"},{"code":"                'rules' =&gt; [","info":"0"},{"code":"                    Mandatory::class =&gt; null","info":"0"},{"code":"                ],","info":"0"},{"code":"            ],","info":"0"},{"code":"            ]","info":"0"},{"code":"        );","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method validateReset","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function validateReset(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;getErrors(","info":"1"},{"code":"            [","info":"0"},{"code":"                'email' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $params-&gt;get('email', ''),","info":"1"},{"code":"                    'rules' =&gt; [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Email::class =&gt; null","info":"0"},{"code":"                    ]","info":"0"},{"code":"                ],","info":"0"},{"code":"            ]","info":"0"},{"code":"        );","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method validateChangePassword","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function validateChangePassword(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $password = $params-&gt;get('password', '');","info":"1"},{"code":"        $errors = $this-&gt;getErrors(","info":"1"},{"code":"            [","info":"0"},{"code":"                'token' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $params-&gt;get('token', ''),","info":"1"},{"code":"                    'rules' =&gt; [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                    ]","info":"0"},{"code":"                ],","info":"0"},{"code":"                'password' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $password,","info":"1"},{"code":"                    'rules' =&gt; [","info":"0"},{"code":"                        Mandatory::class =&gt; null,","info":"0"},{"code":"                        Password::class =&gt; self::PASSWORD_VALIDATION,","info":"1"},{"code":"                    ],","info":"0"},{"code":"                ],","info":"0"},{"code":"                'password_retype' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $params-&gt;get('password_retype', ''),","info":"1"},{"code":"                    'rules' =&gt; [","info":"0"},{"code":"                        Match::class =&gt; ['equalTo' =&gt; $password]","info":"1"},{"code":"                    ]","info":"0"},{"code":"                ],","info":"0"},{"code":"            ]","info":"0"},{"code":"        );","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/ActivateArrayResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Assoc;","info":"0"},{"code":"use Madsoft\\Library\\Crud;","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\ArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Session;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * ActivateArrayResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class ActivateArrayResponder extends ArrayResponder","info":"1"},{"code":"{","info":"0"},{"code":"    protected Crud $crud;","info":"0"},{"code":"    protected AccountValidator $validator;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages         $messages  messages","info":"0"},{"code":"     * @param Merger           $merger    merger","info":"0"},{"code":"     * @param Crud             $crud      crud","info":"0"},{"code":"     * @param AccountValidator $validator validator","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        Crud $crud,","info":"0"},{"code":"        AccountValidator $validator","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger);","info":"1"},{"code":"        $this-&gt;crud = $crud;","info":"1"},{"code":"        $this-&gt;validator = $validator;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getActivateResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc   $params  params","info":"0"},{"code":"     * @param Session $session session","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getActivateResponse(Assoc $params, Session $session): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;validator-&gt;validateActivate($params);","info":"1"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Account activation failed',","info":"1"},{"code":"                $errors","info":"0"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $token = $params-&gt;get('token');","info":"1"},{"code":"        ","info":"0"},{"code":"        $user = $this-&gt;crud-&gt;get(","info":"1"},{"code":"            'user',","info":"1"},{"code":"            ['id', 'active'],","info":"1"},{"code":"            ['token' =&gt; $token],","info":"1"},{"code":"            1,","info":"1"},{"code":"            0,","info":"1"},{"code":"            -1","info":"1"},{"code":"        );","info":"0"},{"code":"        if (!$user-&gt;get('id')) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Invalid token'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        if ($user-&gt;get('active')) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'User is active already'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        if (!$this-&gt;crud-&gt;set('user', ['active' =&gt; '1'], ['token' =&gt; $token])) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'User activation failed'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $session-&gt;unset('resend');","info":"1"},{"code":"        ","info":"0"},{"code":"        return $this-&gt;getSuccessResponse(","info":"1"},{"code":"            'Account is now activated'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/LoginArrayResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Assoc;","info":"0"},{"code":"use Madsoft\\Library\\Crud;","info":"0"},{"code":"use Madsoft\\Library\\Logger;","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\ArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\User;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * LoginArrayResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class LoginArrayResponder extends ArrayResponder","info":"0"},{"code":"{","info":"0"},{"code":"    protected Crud $crud;","info":"0"},{"code":"    protected Logger $logger;","info":"0"},{"code":"    protected User $user;","info":"0"},{"code":"    protected AccountValidator $validator;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages         $messages  messages","info":"0"},{"code":"     * @param Merger           $merger    merger","info":"0"},{"code":"     * @param Crud             $crud      crud","info":"0"},{"code":"     * @param Logger           $logger    logger","info":"0"},{"code":"     * @param User             $user      user","info":"0"},{"code":"     * @param AccountValidator $validator validator","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        Crud $crud,","info":"0"},{"code":"        Logger $logger,","info":"0"},{"code":"        User $user,","info":"0"},{"code":"        AccountValidator $validator","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger);","info":"1"},{"code":"        $this-&gt;crud = $crud;","info":"1"},{"code":"        $this-&gt;logger = $logger;","info":"1"},{"code":"        $this-&gt;user = $user;","info":"1"},{"code":"        $this-&gt;validator = $validator;","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getLoginResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getLoginResponse(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $email = $params-&gt;get('email', '');","info":"1"},{"code":"        ","info":"0"},{"code":"        $errors = $this-&gt;validator-&gt;validateLogin($params);","info":"1"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $this-&gt;loginError($errors, $email);","info":"1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $user = $this-&gt;crud-&gt;get(","info":"1"},{"code":"            'user',","info":"1"},{"code":"            ['id', 'email', 'hash'],","info":"1"},{"code":"            ['email' =&gt; $email],","info":"1"},{"code":"            1,","info":"1"},{"code":"            0,","info":"1"},{"code":"            -1","info":"1"},{"code":"        );","info":"0"},{"code":"        ","info":"0"},{"code":"        ","info":"0"},{"code":"        $errors = $this-&gt;validator-&gt;validateUser(","info":"1"},{"code":"            $user,","info":"1"},{"code":"            $params-&gt;get('password', '')","info":"1"},{"code":"        );","info":"0"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $this-&gt;loginError($errors, $email);","info":"1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $this-&gt;user-&gt;login((int)$user-&gt;get('id'));","info":"1"},{"code":"        ","info":"0"},{"code":"        return $this-&gt;getSuccessResponse(","info":"1"},{"code":"            'Login success'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method loginError","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[][]  $reasons reasons","info":"0"},{"code":"     * @param string|null $email   email","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function loginError(array $reasons, ?string $email = null): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $reasonstr = '';","info":"1"},{"code":"        foreach ($reasons as $field =&gt; $errors) {","info":"1"},{"code":"            $reasonstr .= &quot; field '$field', error(s): '&quot;","info":"1"},{"code":"                    . implode(&quot;', '&quot;, $errors) . &quot;'&quot;;","info":"1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;logger-&gt;error(","info":"1"},{"code":"            &quot;Login error, reason:$reasonstr&quot; . ($email ? &quot;, email: '$email'&quot; : '')","info":"1"},{"code":"        );","info":"0"},{"code":"        return $this-&gt;getErrorResponse(","info":"1"},{"code":"            'Login failed'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/PasswordChangeArrayResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Assoc;","info":"0"},{"code":"use Madsoft\\Library\\Crud;","info":"0"},{"code":"use Madsoft\\Library\\Encrypter;","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\ArrayResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PasswordChangeArrayResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class PasswordChangeArrayResponder extends ArrayResponder","info":"0"},{"code":"{","info":"0"},{"code":"    protected Crud $crud;","info":"0"},{"code":"    protected AccountValidator $validator;","info":"0"},{"code":"    protected Encrypter $encrypter;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages         $messages  messages","info":"0"},{"code":"     * @param Merger           $merger    merger","info":"0"},{"code":"     * @param Crud             $crud      crud","info":"0"},{"code":"     * @param AccountValidator $validator validator","info":"0"},{"code":"     * @param Encrypter        $encrypter encrypter","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        Crud $crud,","info":"0"},{"code":"        AccountValidator $validator,","info":"0"},{"code":"        Encrypter $encrypter","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger);","info":"1"},{"code":"        $this-&gt;crud = $crud;","info":"1"},{"code":"        $this-&gt;validator = $validator;","info":"1"},{"code":"        $this-&gt;encrypter = $encrypter;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getPasswordChangeResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getPasswordChangeResponse(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;validator-&gt;validateChangePassword($params);","info":"1"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Password change failed',","info":"1"},{"code":"                $errors,","info":"0"},{"code":"                [","info":"0"},{"code":"                    'token' =&gt; $params-&gt;get('token')","info":"1"},{"code":"                ]","info":"0"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        if (!$this-&gt;crud-&gt;set(","info":"1"},{"code":"            'user',","info":"1"},{"code":"            [","info":"0"},{"code":"                'hash' =&gt; $this-&gt;encrypter-&gt;encrypt($params-&gt;get('password')),","info":"1"},{"code":"                'token' =&gt; '',","info":"1"},{"code":"            ],","info":"0"},{"code":"            [","info":"0"},{"code":"                'token' =&gt; $params-&gt;get('token'),","info":"1"},{"code":"            ]","info":"0"},{"code":"        )","info":"0"},{"code":"        ) {","info":"0"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Password is not saved',","info":"1"},{"code":"                [],","info":"1"},{"code":"                [","info":"0"},{"code":"                    'token' =&gt; $params-&gt;get('token')","info":"1"},{"code":"                ]","info":"0"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        return $this-&gt;getSuccessResponse(","info":"1"},{"code":"            'Password is changed'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/PasswordResetArrayResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Assoc;","info":"0"},{"code":"use Madsoft\\Library\\Config;","info":"0"},{"code":"use Madsoft\\Library\\Crud;","info":"0"},{"code":"use Madsoft\\Library\\Mailer;","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\ArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Template;","info":"0"},{"code":"use Madsoft\\Library\\Token;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PasswordResetArrayResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class PasswordResetArrayResponder extends ArrayResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const EMAIL_TPL_PATH = __DIR__ . '\/Template\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Template $template;","info":"0"},{"code":"    protected Token $token;","info":"0"},{"code":"    protected Crud $crud;","info":"0"},{"code":"    protected AccountValidator $validator;","info":"0"},{"code":"    protected Mailer $mailer;","info":"0"},{"code":"    protected Config $config;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages         $messages  messages","info":"0"},{"code":"     * @param Merger           $merger    merger","info":"0"},{"code":"     * @param Template         $template  template","info":"0"},{"code":"     * @param Token            $token     token","info":"0"},{"code":"     * @param Crud             $crud      crud","info":"0"},{"code":"     * @param AccountValidator $validator validator","info":"0"},{"code":"     * @param Mailer           $mailer    mailer","info":"0"},{"code":"     * @param Config           $config    config","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        Template $template,","info":"0"},{"code":"        Token $token,","info":"0"},{"code":"        Crud $crud,","info":"0"},{"code":"        AccountValidator $validator,","info":"0"},{"code":"        Mailer $mailer,","info":"0"},{"code":"        Config $config","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger);","info":"1"},{"code":"        $this-&gt;template = $template;","info":"1"},{"code":"        $this-&gt;token = $token;","info":"1"},{"code":"        $this-&gt;crud = $crud;","info":"1"},{"code":"        $this-&gt;validator = $validator;","info":"1"},{"code":"        $this-&gt;mailer = $mailer;","info":"1"},{"code":"        $this-&gt;config = $config;","info":"1"},{"code":"    }","info":"1"},{"code":"    \/**","info":"0"},{"code":"     * Method getPasswordResetFormResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getPasswordResetFormResponse(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $token = $params-&gt;get('token', '');","info":"1"},{"code":"        if ($token) {","info":"1"},{"code":"            $user = $this-&gt;crud-&gt;get('user', ['id'], ['token' =&gt; $token], 1, 0, -1);","info":"1"},{"code":"            if (!$user-&gt;get('id')) {","info":"1"},{"code":"                return $this-&gt;getErrorResponse(","info":"1"},{"code":"                    'Invalid token'","info":"1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            return $this-&gt;getResponse(","info":"1"},{"code":"                ['token' =&gt; $token]","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;getResponse();","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getPasswordResetRequestResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc $params params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getPasswordResetRequestResponse(Assoc $params): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;validator-&gt;validateReset($params);","info":"1"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Reset password request failed',","info":"1"},{"code":"                $errors","info":"0"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $email = (string)$params-&gt;get('email');","info":"1"},{"code":"        $user = $this-&gt;crud-&gt;get('user', ['email'], ['email' =&gt; $email], 1, 0, -1);","info":"1"},{"code":"        if ($user-&gt;get('email') !== $email) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Email address not found'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $token = $this-&gt;token-&gt;generate();","info":"1"},{"code":"        if (!$this-&gt;crud-&gt;set('user', ['token' =&gt; $token], ['email' =&gt; $email])) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Token is not updated'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        if (!$this-&gt;sendResetEmail($email, $token)) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Email sending failed'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        return $this-&gt;getSuccessResponse(","info":"1"},{"code":"            'Password reset request email sent'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method sendResetEmail","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $email email","info":"0"},{"code":"     * @param string $token token","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function sendResetEmail(string $email, string $token): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $message = $this-&gt;template-&gt;process(","info":"1"},{"code":"            'emails\/reset.phtml',","info":"1"},{"code":"            [","info":"0"},{"code":"                'base' =&gt; $this-&gt;config-&gt;get('Site')-&gt;get('base'),","info":"1"},{"code":"                'token' =&gt; $token,","info":"1"},{"code":"            ],","info":"0"},{"code":"            $this::EMAIL_TPL_PATH","info":"1"},{"code":"        );","info":"0"},{"code":"        return $this-&gt;mailer-&gt;send(","info":"1"},{"code":"            $email,","info":"1"},{"code":"            'Pasword reset requested',","info":"1"},{"code":"            $message","info":"0"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/RegistryArrayResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Assoc;","info":"0"},{"code":"use Madsoft\\Library\\Config;","info":"0"},{"code":"use Madsoft\\Library\\Crud;","info":"0"},{"code":"use Madsoft\\Library\\Encrypter;","info":"0"},{"code":"use Madsoft\\Library\\Mailer;","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\ArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Session;","info":"0"},{"code":"use Madsoft\\Library\\Template;","info":"0"},{"code":"use Madsoft\\Library\\Token;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * RegistryArrayResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class RegistryArrayResponder extends ArrayResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const EMAIL_TPL_PATH = __DIR__ . '\/Template\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Template $template;","info":"0"},{"code":"    protected Token $token;","info":"0"},{"code":"    protected Encrypter $encrypter;","info":"0"},{"code":"    protected Crud $crud;","info":"0"},{"code":"    protected AccountValidator $validator;","info":"0"},{"code":"    protected Mailer $mailer;","info":"0"},{"code":"    protected Config $config;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages         $messages  messages","info":"0"},{"code":"     * @param Merger           $merger    merger","info":"0"},{"code":"     * @param Template         $template  template","info":"0"},{"code":"     * @param Token            $token     token","info":"0"},{"code":"     * @param Encrypter        $encrypter encrypter","info":"0"},{"code":"     * @param Crud             $crud      crud","info":"0"},{"code":"     * @param AccountValidator $validator validator","info":"0"},{"code":"     * @param Mailer           $mailer    mailer","info":"0"},{"code":"     * @param Config           $config    config","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        Template $template,","info":"0"},{"code":"        Token $token,","info":"0"},{"code":"        Encrypter $encrypter,","info":"0"},{"code":"        Crud $crud,","info":"0"},{"code":"        AccountValidator $validator,","info":"0"},{"code":"        Mailer $mailer,","info":"0"},{"code":"        Config $config","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger);","info":"1"},{"code":"        $this-&gt;template = $template;","info":"1"},{"code":"        $this-&gt;token = $token;","info":"1"},{"code":"        $this-&gt;encrypter = $encrypter;","info":"1"},{"code":"        $this-&gt;crud = $crud;","info":"1"},{"code":"        $this-&gt;validator = $validator;","info":"1"},{"code":"        $this-&gt;mailer = $mailer;","info":"1"},{"code":"        $this-&gt;config = $config;","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getRegistryResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc   $params  params","info":"0"},{"code":"     * @param Session $session session","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getRegistryResponse(Assoc $params, Session $session): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = $this-&gt;validator-&gt;validateRegistry($params);","info":"1"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Invalid registration data',","info":"1"},{"code":"                $errors","info":"0"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $email = $params-&gt;get('email');","info":"1"},{"code":"        $token = $this-&gt;token-&gt;generate();","info":"1"},{"code":"        ","info":"0"},{"code":"        $user = $this-&gt;crud-&gt;get('user', ['email'], ['email' =&gt; $email], 1, 0, -1);","info":"1"},{"code":"        if ($user-&gt;get('email') === $email) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'Email address already registered',","info":"1"},{"code":"                $errors","info":"0"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        if (!$this-&gt;crud-&gt;add(","info":"1"},{"code":"            'user',","info":"1"},{"code":"            [","info":"0"},{"code":"                'email' =&gt; $email,","info":"1"},{"code":"                'hash' =&gt; $this-&gt;encrypter-&gt;encrypt($params-&gt;get('password')),","info":"1"},{"code":"                'token' =&gt; $token,","info":"1"},{"code":"                'active' =&gt; '0',","info":"1"},{"code":"            ],","info":"0"},{"code":"            -1","info":"1"},{"code":"        )","info":"0"},{"code":"        ) {","info":"0"},{"code":"            return $this-&gt;getErrorResponse(","info":"1"},{"code":"                'User is not saved'","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        $session-&gt;set('resend', ['email' =&gt; $email, 'token' =&gt; $token]);","info":"1"},{"code":"        ","info":"0"},{"code":"        if (!$this-&gt;sendActivationEmail($email, $token)) {","info":"1"},{"code":"            return $this-&gt;getWarningResponse(","info":"1"},{"code":"                'Activation email is not sent',","info":"1"},{"code":"                $user-&gt;getFields()","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        return $this-&gt;getSuccessResponse(","info":"1"},{"code":"            'We sent an activation email to your email account, '","info":"0"},{"code":"                . 'please follow the instructions.'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getResendResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Session $session session","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getResendResponse(Session $session): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $resend = $session-&gt;get('resend');","info":"1"},{"code":"        $email = $resend['email'];","info":"1"},{"code":"        $token = $resend['token'];","info":"1"},{"code":"        if (!$this-&gt;sendActivationEmail($email, $token)) {","info":"1"},{"code":"            return $this-&gt;getErrorResponse(","info":"-1"},{"code":"                'Activation email is not sent'","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        return $this-&gt;getSuccessResponse(","info":"1"},{"code":"            'We re-sent an activation email to your email account, '","info":"0"},{"code":"                . 'please follow the instructions.'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method sendActivationEmail","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $email email","info":"0"},{"code":"     * @param string $token token","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function sendActivationEmail(string $email, string $token): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $message = $this-&gt;template-&gt;process(","info":"1"},{"code":"            'emails\/activation.phtml',","info":"1"},{"code":"            [","info":"0"},{"code":"                'base' =&gt; $this-&gt;config-&gt;get('Site')-&gt;get('base'),","info":"1"},{"code":"                'token' =&gt; $token,","info":"1"},{"code":"            ],","info":"0"},{"code":"            $this::EMAIL_TPL_PATH","info":"1"},{"code":"        );","info":"0"},{"code":"        return $this-&gt;mailer-&gt;send(","info":"1"},{"code":"            $email,","info":"1"},{"code":"            'Activate your account',","info":"1"},{"code":"            $message","info":"0"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"96.153846153846"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/ActivateTemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account\\Template;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Params;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\ActivateArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\TemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Session;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * ActivateTemplateResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class ActivateTemplateResponder extends TemplateResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const PATH = __DIR__ . '\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getActivateResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param ActivateArrayResponder $arrayResponder activator","info":"0"},{"code":"     * @param Params                 $params         params","info":"0"},{"code":"     * @param Session                $session        session","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getActivateResponse(","info":"0"},{"code":"        ActivateArrayResponder $arrayResponder,","info":"0"},{"code":"        Params $params,","info":"0"},{"code":"        Session $session","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        return $this-&gt;setTplfile('activated.phtml')-&gt;getResponse(","info":"1"},{"code":"            $arrayResponder-&gt;getActivateResponse($params, $session)","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/LoginTemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account\\Template;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Params;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\LoginArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\TemplateResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * LoginTemplateResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class LoginTemplateResponder extends TemplateResponder","info":"1"},{"code":"{","info":"0"},{"code":"    const PATH = __DIR__ . '\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getLoginFormResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getLoginFormResponse(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;setTplfile('login.phtml')-&gt;getResponse();","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getLoginResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param LoginArrayResponder $arrayResponder arrayResponder","info":"0"},{"code":"     * @param Params              $params         params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getLoginResponse(","info":"0"},{"code":"        LoginArrayResponder $arrayResponder,","info":"0"},{"code":"        Params $params","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $arrayResponse = $arrayResponder-&gt;getLoginResponse($params);","info":"1"},{"code":"        if ($arrayResponder-&gt;hasResponseMessageType($arrayResponse, 'error')) {","info":"1"},{"code":"            return $this-&gt;setTplfile('login.phtml')-&gt;getResponse($arrayResponse);","info":"1"},{"code":"        }","info":"0"},{"code":"        return $this","info":"0"},{"code":"            -&gt;setTplfile('..\/..\/..\/Example\/phtml\/example.phtml')","info":"1"},{"code":"            -&gt;getResponse($arrayResponse);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/LogoutTemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account\\Template;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\TemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Template;","info":"0"},{"code":"use Madsoft\\Library\\User;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * LogoutTemplateResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class LogoutTemplateResponder extends TemplateResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const PATH = __DIR__ . '\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected User $user;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages $messages messages","info":"0"},{"code":"     * @param Merger   $merger   merger","info":"0"},{"code":"     * @param Template $template template","info":"0"},{"code":"     * @param User     $user     user","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        Template $template,","info":"0"},{"code":"        User $user","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger, $template);","info":"1"},{"code":"        $this-&gt;user = $user;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getLogoutResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getLogoutResponse(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;user-&gt;logout();","info":"1"},{"code":"        ","info":"0"},{"code":"        return $this-&gt;setTplfile('login.phtml')-&gt;getSuccessResponse(","info":"1"},{"code":"            'Logout success'","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/PasswordChangeTemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account\\Template;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Params;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\PasswordChangeArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\TemplateResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PasswordChangeTemplateResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class PasswordChangeTemplateResponder extends TemplateResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const PATH = __DIR__ . '\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getPasswordChangeResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param PasswordChangeArrayResponder $arrayResponder passwordChanger","info":"0"},{"code":"     * @param Params                       $params         params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getPasswordChangeResponse(","info":"0"},{"code":"        PasswordChangeArrayResponder $arrayResponder,","info":"0"},{"code":"        Params $params","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $responseArray = $arrayResponder-&gt;getPasswordChangeResponse($params);","info":"1"},{"code":"        if ($arrayResponder-&gt;hasResponseMessageType($responseArray, 'error')) {","info":"1"},{"code":"            return $this-&gt;setTplfile('change.phtml')-&gt;getResponse($responseArray);","info":"1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;setTplfile('login.phtml')-&gt;getResponse($responseArray);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/PasswordResetTemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account\\Template;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Params;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\PasswordResetArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\TemplateResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PasswordResetTemplateResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class PasswordResetTemplateResponder extends TemplateResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const PATH = __DIR__ . '\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getPasswordResetFormResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param PasswordResetArrayResponder $arrayResponder arrayResponder","info":"0"},{"code":"     * @param Params                      $params         params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getPasswordResetFormResponse(","info":"0"},{"code":"        PasswordResetArrayResponder $arrayResponder,","info":"0"},{"code":"        Params $params","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $arrayResponse = $arrayResponder-&gt;getPasswordResetFormResponse($params);","info":"1"},{"code":"        if ($arrayResponder-&gt;hasResponseKey($arrayResponse, 'token')) {","info":"1"},{"code":"            return $this-&gt;setTplfile('change.phtml')-&gt;getResponse($arrayResponse);","info":"1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;setTplfile('reset.phtml')-&gt;getResponse($arrayResponse);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getPasswordResetResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param PasswordResetArrayResponder $arrayResponder arrayResponder","info":"0"},{"code":"     * @param Params                      $params         params","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getPasswordResetRequestResponse(","info":"0"},{"code":"        PasswordResetArrayResponder $arrayResponder,","info":"0"},{"code":"        Params $params","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        return $this-&gt;setTplfile('reset.phtml')-&gt;getResponse(","info":"1"},{"code":"            $arrayResponder-&gt;getPasswordResetRequestResponse($params)","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/RegistryTemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Account\\Template;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Params;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\Account\\RegistryArrayResponder;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\TemplateResponder;","info":"0"},{"code":"use Madsoft\\Library\\Session;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * RegistryTemplateResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Account\\Template","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class RegistryTemplateResponder extends TemplateResponder","info":"0"},{"code":"{","info":"0"},{"code":"    const PATH = __DIR__ . '\/phtml\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getRegistryFormResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getRegistryFormResponse(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;setTplfile('registry.phtml')-&gt;getResponse();","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getRegistryResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param RegistryArrayResponder $arrayResponder arrayResponder","info":"0"},{"code":"     * @param Params                 $params         params","info":"0"},{"code":"     * @param Session                $session        session","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getRegistryResponse(","info":"0"},{"code":"        RegistryArrayResponder $arrayResponder,","info":"0"},{"code":"        Params $params,","info":"0"},{"code":"        Session $session","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $arrayResponse = $arrayResponder-&gt;getRegistryResponse($params, $session);","info":"1"},{"code":"        if ($arrayResponder-&gt;hasResponseMessageType($arrayResponse, 'error')) {","info":"1"},{"code":"            return $this-&gt;setTplfile('registry.phtml')-&gt;getResponse($arrayResponse);","info":"1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;setTplfile('activate.phtml')-&gt;getResponse($arrayResponse);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getResendResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param RegistryArrayResponder $arrayResponder arrayResponder","info":"0"},{"code":"     * @param Session                $session        session","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getResendResponse(","info":"0"},{"code":"        RegistryArrayResponder $arrayResponder,","info":"0"},{"code":"        Session $session","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        return $this-&gt;setTplfile('activate.phtml')-&gt;getResponse(","info":"1"},{"code":"            $arrayResponder-&gt;getResendResponse($session)","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/activate.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;Activate your account&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"&lt;p&gt;To resend the activation email, please &lt;a href=&quot;?q=resend&quot;&gt;click here...&lt;\/a&gt;&lt;\/p&gt;","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/activated.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;Account activation&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"","info":"1"},{"code":"&lt;?php if(isset($errors['token'])): ?&gt;","info":"1"},{"code":"&lt;p&gt;Token error: &lt;?=implode(', ', $errors['token'])?&gt;&lt;\/p&gt;","info":"1"},{"code":"&lt;?php endif ?&gt;","info":"0"},{"code":"","info":"1"},{"code":"&lt;a href=&quot;?q=login&quot;&gt;Login&lt;\/a&gt;","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/change.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;Change password&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"&lt;form method=&quot;POST&quot; action=&quot;?q=change&quot;&gt;","info":"1"},{"code":"    &lt;?=$csrf?&gt;","info":"1"},{"code":"    ","info":"1"},{"code":"    &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;&lt;?=$token?&gt;&quot;&gt;","info":"1"},{"code":"    &lt;span class=&quot;errors&quot;&gt;&lt;?=@implode(', ', @$errors['token'])?&gt;&lt;\/span&gt;","info":"1"},{"code":"    ","info":"0"},{"code":"    &lt;input type=&quot;password&quot; name=&quot;password&quot; value=&quot;&lt;?=@$params['password']?&gt;&quot; placeholder=&quot;Password&quot;&gt;","info":"1"},{"code":"    &lt;span class=&quot;errors&quot;&gt;&lt;?=@implode(', ', @$errors['password'])?&gt;&lt;\/span&gt;","info":"1"},{"code":"    ","info":"0"},{"code":"    &lt;input type=&quot;password&quot; name=&quot;password_retype&quot; value=&quot;&lt;?=@$params['password_retype']?&gt;&quot; placeholder=&quot;Password re-type&quot;&gt;","info":"1"},{"code":"    &lt;span class=&quot;errors&quot;&gt;&lt;?=@implode(', ', @$errors['password_retype'])?&gt;&lt;\/span&gt;","info":"1"},{"code":"    ","info":"0"},{"code":"    &lt;input type=&quot;submit&quot; value=&quot;Change password&quot;&gt;","info":"0"},{"code":"&lt;\/form&gt;","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/emails\/activation.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"Thank you for your registration,&lt;br&gt;","info":"1"},{"code":"please activate your account by click on the following link or copy to your browser address line:&lt;br&gt;","info":"0"},{"code":"&lt;a href=&quot;&lt;?=$base?&gt;?q=activate&amp;token=&lt;?=$token?&gt;&quot;&gt;&lt;?=$base?&gt;?q=activate&amp;token=&lt;?=$token?&gt;&lt;\/a&gt;","info":"1"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/emails\/reset.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"Password reset requested in our system,&lt;br&gt;","info":"1"},{"code":"To reset your password please click the following link or copy it to your browser.&lt;br&gt;","info":"0"},{"code":"&lt;a href=&quot;&lt;?=$base?&gt;?q=reset&amp;token=&lt;?=$token?&gt;&quot;&gt;&lt;?=$base?&gt;?q=reset&amp;token=&lt;?=$token?&gt;&lt;\/a&gt;&lt;br&gt;","info":"1"},{"code":"If you did not request to reset your password please ignore this message.","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/login.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;Login&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"&lt;form method=&quot;POST&quot; action=&quot;?q=login&quot;&gt;","info":"1"},{"code":"    &lt;?=$csrf?&gt;","info":"1"},{"code":"    &lt;input type=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;Email&quot;&gt;","info":"1"},{"code":"    &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;Password&quot;&gt;","info":"0"},{"code":"    &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;","info":"0"},{"code":"&lt;\/form&gt;","info":"0"},{"code":"&lt;a href=&quot;?q=registry&quot;&gt;Registration&lt;\/a&gt;","info":"0"},{"code":"&lt;a href=&quot;?q=reset&quot;&gt;Forgot password&lt;\/a&gt;","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/registry.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;Registration&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"&lt;form method=&quot;POST&quot;&gt;","info":"1"},{"code":"    &lt;?=$csrf?&gt;","info":"1"},{"code":"    ","info":"1"},{"code":"    &lt;input type=&quot;email&quot; name=&quot;email&quot; value=&quot;&lt;?=@$params['email']?&gt;&quot; placeholder=&quot;Email address&quot;&gt;","info":"1"},{"code":"    &lt;span class=&quot;errors&quot;&gt;&lt;?=@implode(', ', @$errors['email'])?&gt;&lt;\/span&gt;","info":"1"},{"code":"    ","info":"0"},{"code":"    &lt;input type=&quot;email_retype&quot; name=&quot;email_retype&quot; value=&quot;&lt;?=@$params['email_retype']?&gt;&quot; placeholder=&quot;Re-enter email address&quot;&gt;","info":"1"},{"code":"    &lt;span class=&quot;errors&quot;&gt;&lt;?=@implode(', ', @$errors['email_retype'])?&gt;&lt;\/span&gt;","info":"1"},{"code":"    ","info":"0"},{"code":"    &lt;input type=&quot;password&quot; name=&quot;password&quot; value=&quot;&lt;?=@$params['password']?&gt;&quot; placeholder=&quot;Password&quot;&gt;","info":"1"},{"code":"    &lt;span class=&quot;errors&quot;&gt;&lt;?=@implode(', ', @$errors['password'])?&gt;&lt;\/span&gt;","info":"1"},{"code":"    ","info":"0"},{"code":"    &lt;input type=&quot;submit&quot; value=&quot;Register&quot;&gt;","info":"0"},{"code":"&lt;\/form&gt;","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Account\/Template\/phtml\/reset.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;Password reset&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"&lt;form method=&quot;POST&quot;&gt;","info":"1"},{"code":"    &lt;?=$csrf?&gt;","info":"1"},{"code":"    ","info":"1"},{"code":"    &lt;input type=&quot;email&quot; name=&quot;email&quot; value=&quot;&lt;?=@$params['email']?&gt;&quot; placeholder=&quot;Email address&quot;&gt;","info":"1"},{"code":"    &lt;span class=&quot;errors&quot;&gt;&lt;?=@implode(', ', @$errors['email'])?&gt;&lt;\/span&gt;","info":"1"},{"code":"","info":"0"},{"code":"    &lt;input type=&quot;submit&quot; value=&quot;Reset&quot;&gt;","info":"0"},{"code":"&lt;\/form&gt;","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/ArrayResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Responder\\AbstractResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * ArrayResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class ArrayResponder extends AbstractResponder","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getErrorResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string     $error  error","info":"0"},{"code":"     * @param string[][] $errors errors","info":"0"},{"code":"     * @param mixed[]    $data   data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getErrorResponse(","info":"0"},{"code":"        string $error = AbstractResponder::LBL_ERROR,","info":"0"},{"code":"        array $errors = [],","info":"0"},{"code":"        array $data = []","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        $this-&gt;messages-&gt;add('error', $error);","info":"1"},{"code":"        return $this-&gt;getResponse($data, $errors);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getWarningResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string  $message message","info":"0"},{"code":"     * @param mixed[] $data    data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getWarningResponse(","info":"0"},{"code":"        string $message = AbstractResponder::LBL_WARNING,","info":"0"},{"code":"        array $data = []","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        $this-&gt;messages-&gt;add('success', $message);","info":"1"},{"code":"        return $this-&gt;getResponse($data);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getSuccessResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string  $message message","info":"0"},{"code":"     * @param mixed[] $data    data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getSuccessResponse(","info":"0"},{"code":"        string $message = AbstractResponder::LBL_SUCCESS,","info":"0"},{"code":"        array $data = []","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        $this-&gt;messages-&gt;add('success', $message);","info":"1"},{"code":"        return $this-&gt;getResponse($data);","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[]    $data   data","info":"0"},{"code":"     * @param string[][] $errors errors","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getResponse(array $data = [], array $errors = []): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $messages = $this-&gt;messages-&gt;get();","info":"1"},{"code":"        if ($messages) {","info":"1"},{"code":"            $data['messages'] = $messages;","info":"1"},{"code":"        }","info":"0"},{"code":"        if ($errors) {","info":"1"},{"code":"            $data['errors'] = $errors;","info":"1"},{"code":"        }","info":"0"},{"code":"        return $data;","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method process","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $data data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function process(array $data): array","info":"0"},{"code":"    {","info":"0"},{"code":"        return $data;","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method hasResponseMessageType","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $response response","info":"0"},{"code":"     * @param string  $type     type","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function hasResponseMessageType(array $response, string $type): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;messages-&gt;validateMessageType($type);","info":"1"},{"code":"        return isset($response['messages']) &amp;&amp; isset($response['messages'][$type]);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method hasResponseKey","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $response response","info":"0"},{"code":"     * @param string  $key      key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function hasResponseKey(array $response, string $key): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return isset($response[$key]);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"94.117647058824"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Example\/Example.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Example","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder\\Example;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Example","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder\\Example","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *","info":"0"},{"code":" * @suppress PhanUnreferencedPublicClassConstant","info":"0"},{"code":" *\/","info":"0"},{"code":"class Example","info":"0"},{"code":"{","info":"0"},{"code":"    const ROUTES = [","info":"0"},{"code":"        'public' =&gt; [","info":"0"},{"code":"            'GET' =&gt; [","info":"0"},{"code":"                'example' =&gt; [Example::class, 'getPublic'],","info":"0"},{"code":"            ],","info":"0"},{"code":"        ],","info":"0"},{"code":"        'protected' =&gt; [","info":"0"},{"code":"            'GET' =&gt; [","info":"0"},{"code":"                '' =&gt; [Example::class, 'getProtected'],","info":"0"},{"code":"                'example' =&gt; [Example::class, 'getProtected'],","info":"0"},{"code":"            ],","info":"0"},{"code":"        ],","info":"0"},{"code":"    ];","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getPublic","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getPublic(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return 'Public Index Page';","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getProtected","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getProtected(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return 'Restricted Index Page';","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/Example\/phtml\/example.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;Index&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"","info":"1"},{"code":"&lt;a href=&quot;?q=logout&quot;&gt;Logout&lt;\/a&gt;","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/StringResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Responder\\AbstractResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * StringResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"abstract class StringResponder extends AbstractResponder","info":"1"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getErrorResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string     $error  error","info":"0"},{"code":"     * @param string[][] $errors errors","info":"0"},{"code":"     * @param mixed[]    $data   data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getErrorResponse(","info":"0"},{"code":"        string $error = AbstractResponder::LBL_ERROR,","info":"0"},{"code":"        array $errors = [],","info":"0"},{"code":"        array $data = []","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $this-&gt;messages-&gt;add('error', $error);","info":"-1"},{"code":"        return $this-&gt;getResponse($data, $errors);","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/\/    \/**","info":"0"},{"code":"    \/\/     * Method getWarningResponse","info":"0"},{"code":"    \/\/     *","info":"0"},{"code":"    \/\/     * @param string  $message message","info":"0"},{"code":"    \/\/     * @param mixed[] $data    data","info":"0"},{"code":"    \/\/     *","info":"0"},{"code":"    \/\/     * @return string","info":"0"},{"code":"    \/\/     *\/","info":"0"},{"code":"    \/\/    public function getWarningResponse(","info":"0"},{"code":"    \/\/        string $message = AbstractResponder::LBL_WARNING,","info":"0"},{"code":"    \/\/        array $data = []","info":"0"},{"code":"    \/\/    ): string {","info":"0"},{"code":"    \/\/        $this-&gt;messages-&gt;add('warning', $message);","info":"0"},{"code":"    \/\/        return $this-&gt;getResponse($data);","info":"0"},{"code":"    \/\/    }","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getSuccessResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string  $message message","info":"0"},{"code":"     * @param mixed[] $data    data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getSuccessResponse(","info":"0"},{"code":"        string $message = AbstractResponder::LBL_SUCCESS,","info":"0"},{"code":"        array $data = []","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $this-&gt;messages-&gt;add('success', $message);","info":"1"},{"code":"        return $this-&gt;getResponse($data);","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getResponse","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[]    $data   data","info":"0"},{"code":"     * @param string[][] $errors errors","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getResponse(array $data = [], array $errors = []): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;process(","info":"1"},{"code":"            $this-&gt;merger-&gt;merge(","info":"1"},{"code":"                [","info":"0"},{"code":"                    'messages' =&gt; $this-&gt;messages-&gt;get(),","info":"1"},{"code":"                    'errors' =&gt; $errors,","info":"1"},{"code":"                ],","info":"0"},{"code":"                $data","info":"0"},{"code":"            )","info":"0"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method process","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $data data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    abstract protected function process(array $data): string;","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"80"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Responder\/TemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Responder;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\StringResponder;","info":"0"},{"code":"use Madsoft\\Library\\Template;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * TemplateResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Responder","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class TemplateResponder extends StringResponder","info":"1"},{"code":"{","info":"0"},{"code":"    const PATH = null;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected string $tplfile = '';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Template $template;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages $messages messages","info":"0"},{"code":"     * @param Merger   $merger   merger","info":"0"},{"code":"     * @param Template $template template","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        Template $template","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger);","info":"1"},{"code":"        $this-&gt;template = $template;","info":"1"},{"code":"    }","info":"1"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method setTplfile","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $tplfile tplfile","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function setTplfile(string $tplfile): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;tplfile = $tplfile;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method process","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $data data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function process(array $data): string","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;tplfile) {","info":"1"},{"code":"            throw new RuntimeException('Template file is not set.');","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;template-&gt;process($this-&gt;tplfile, $data, $this::PATH);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"90"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Row.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Row","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Row implements Assoc","info":"1"},{"code":"{","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $fields","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var string[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected array $fields;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method setFields","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[] $fields fields","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function setFields(array $fields): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;fields = $fields;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method get","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key     key","info":"0"},{"code":"     * @param string $default default","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return ?string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(string $key, $default = null)","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;fields[$key] ?? $default;","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method has","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function has(string $key): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return isset($this-&gt;fields[$key]);","info":"-1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method set","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key   key","info":"0"},{"code":"     * @param string $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return Assoc","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function set(string $key, $value): Assoc","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;fields[$key] = $value;","info":"-1"},{"code":"        return $this;","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getFields","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getFields(): array","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;fields;","info":"-1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"55.555555555556"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Safer.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Safer","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Safer","info":"0"},{"code":"{","info":"0"},{"code":"    ","info":"0"},{"code":"    \/\/ mysqli_real_escape_string","info":"0"},{"code":"    \/\/ htmlentities","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method free","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param callable $callback callback","info":"0"},{"code":"     * @param mixed    $value    value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function freez(callable $callback, $value)","info":"0"},{"code":"    {","info":"0"},{"code":"        if (is_array($value) || is_object($value)) {","info":"1"},{"code":"            $ret = [];","info":"1"},{"code":"            foreach ((array)$value as $key =&gt; $value) {","info":"1"},{"code":"                $ret[$this-&gt;freez($callback, $key)] = $this-&gt;freez(","info":"1"},{"code":"                    $callback,","info":"1"},{"code":"                    $value","info":"0"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            return $ret;","info":"1"},{"code":"        }","info":"0"},{"code":"        $ret = $callback((string)$value);","info":"1"},{"code":"        return $ret;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Section.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Section","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Section implements Assoc","info":"0"},{"code":"{","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $data","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var mixed[]|Assoc","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected $data = [];","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method create","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Assoc|mixed[] $values values","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function create($values): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $section = new self();","info":"1"},{"code":"        $section-&gt;data = $values;","info":"1"},{"code":"        return $section;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method get","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key     key","info":"0"},{"code":"     * @param mixed  $default default","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(string $key, $default = null)","info":"0"},{"code":"    {","info":"0"},{"code":"        if (is_array($this-&gt;data)) {","info":"1"},{"code":"            if (!array_key_exists($key, $this-&gt;data)) {","info":"1"},{"code":"                return $default;","info":"1"},{"code":"            }","info":"0"},{"code":"            if (is_array($this-&gt;data[$key])) {","info":"1"},{"code":"                $this-&gt;data[$key] = $this-&gt;create($this-&gt;data[$key]);","info":"1"},{"code":"            }","info":"0"},{"code":"            return $this-&gt;data[$key];","info":"1"},{"code":"        }","info":"0"},{"code":"        if ($this-&gt;data-&gt;has($key)) {","info":"-1"},{"code":"            return $this-&gt;data-&gt;get($key);","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $default;","info":"-1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method has","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function has(string $key): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        if (is_array($this-&gt;data)) {","info":"-1"},{"code":"            return array_key_exists($key, $this-&gt;data);","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $this-&gt;data-&gt;has($key);","info":"-1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method set","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key   key","info":"0"},{"code":"     * @param mixed  $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return Assoc","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function set(string $key, $value): Assoc","info":"0"},{"code":"    {","info":"0"},{"code":"        if (is_array($this-&gt;data)) {","info":"-1"},{"code":"            $this-&gt;data[$key] = $value;","info":"-1"},{"code":"            return $this;","info":"-1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;data-&gt;set($key, $value);","info":"-1"},{"code":"        return $this;","info":"-1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"45"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Server.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\StringRule;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Server","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *","info":"0"},{"code":" * @SuppressWarnings(PHPMD.Superglobals)","info":"0"},{"code":" *\/","info":"0"},{"code":"class Server implements Assoc","info":"0"},{"code":"{","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getMethod","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    \/\/public function getMethod(): string","info":"0"},{"code":"    \/\/{","info":"0"},{"code":"    \/\/    return $this-&gt;get('REQUEST_METHOD');","info":"0"},{"code":"    \/\/}","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getBaseUrl","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getBaseUrl(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return sprintf(","info":"1"},{"code":"            &quot;%s:\/\/%s&quot;,","info":"1"},{"code":"            $this-&gt;has('HTTPS') &amp;&amp; $this-&gt;get('HTTPS') != 'off' ?","info":"1"},{"code":"                'https' :","info":"1"},{"code":"                'http',","info":"1"},{"code":"            $this-&gt;get('SERVER_NAME')","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getBaseUri","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getBaseUri(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return sprintf(","info":"1"},{"code":"            &quot;%s:\/\/%s%s&quot;,","info":"1"},{"code":"            $this-&gt;has('HTTPS') &amp;&amp; $this-&gt;get('HTTPS') != 'off' ?","info":"1"},{"code":"                'https' :","info":"1"},{"code":"                'http',","info":"1"},{"code":"            $this-&gt;get('SERVER_NAME'),","info":"1"},{"code":"            $this-&gt;get('REQUEST_URI')","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method get","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key     key","info":"0"},{"code":"     * @param mixed  $default default","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(string $key, $default = null)","info":"0"},{"code":"    {","info":"0"},{"code":"        return $_SERVER[$key] ?? $default;","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method has","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function has(string $key): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return isset($_SERVER[$key]);","info":"1"},{"code":"    }","info":"-2"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method set","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key   key","info":"0"},{"code":"     * @param mixed  $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return Assoc","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function set(string $key, $value): Assoc","info":"0"},{"code":"    {","info":"0"},{"code":"        throw new RuntimeException(","info":"-1"},{"code":"            '$_SERVER Superglobals is not writeable. '","info":"0"},{"code":"                . 'Trying to access to $_SERVER at key: ' . $key","info":"-1"},{"code":"                . ' Value: ' . ((new StringRule())-&gt;check($value) ? $value : '???')","info":"-1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"83.333333333333"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Session.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Session","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *","info":"0"},{"code":" * @SuppressWarnings(PHPMD.Superglobals)","info":"0"},{"code":" *\/","info":"0"},{"code":"class Session implements Assoc","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct()","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;start();","info":"1"},{"code":"    }","info":"1"},{"code":"    \/**","info":"0"},{"code":"     * Method start","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function start(): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $ret = false;","info":"1"},{"code":"        if (session_status() == PHP_SESSION_NONE) {","info":"1"},{"code":"            if (php_sapi_name() === 'cli') {","info":"1"},{"code":"                if (!isset($_SESSION)) {","info":"1"},{"code":"                    $_SESSION = [];","info":"-1"},{"code":"                    return true;","info":"-1"},{"code":"                }","info":"0"},{"code":"                return false;","info":"1"},{"code":"            }","info":"0"},{"code":"            $ret = session_start();","info":"-1"},{"code":"        }","info":"0"},{"code":"        return $ret;","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method destroy","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function destroy(): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        foreach (array_keys($_SESSION) as $key) {","info":"1"},{"code":"            unset($_SESSION[$key]);","info":"1"},{"code":"        }","info":"0"},{"code":"        if (php_sapi_name() === 'cli') {","info":"1"},{"code":"            unset($_SESSION);","info":"1"},{"code":"            return true;","info":"1"},{"code":"        }","info":"0"},{"code":"        return session_destroy();","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method get","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key     key","info":"0"},{"code":"     * @param mixed  $default default","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function get(string $key, $default = null)","info":"0"},{"code":"    {","info":"0"},{"code":"        return $_SESSION[$key] ?? $default;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method set","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key   key","info":"0"},{"code":"     * @param mixed  $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return Assoc","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function set(string $key, $value): Assoc","info":"0"},{"code":"    {","info":"0"},{"code":"        $_SESSION[$key] = $value;","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method has","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function has(string $key): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return isset($_SESSION[$key]);","info":"-1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method unset","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $key key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function unset(string $key): self","info":"0"},{"code":"    {","info":"0"},{"code":"        unset($_SESSION[$key]);","info":"1"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"73.913043478261"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Template.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Template","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Template","info":"0"},{"code":"{","info":"0"},{"code":"    const TPL_PATH = __DIR__ . '\/phtml\/';","info":"0"},{"code":"    const TPL_PATH_EXT = __DIR__ . '\/phtml\/';","info":"0"},{"code":"            ","info":"0"},{"code":"    const RESERVED_VARS = [","info":"0"},{"code":"        'vars',","info":"0"},{"code":"        'safer',","info":"0"},{"code":"        'filename',","info":"0"},{"code":"        'csrf',","info":"0"},{"code":"        'csrfgen',","info":"0"},{"code":"    ];","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $vars","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public array $vars;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Safer $safer;","info":"0"},{"code":"    protected Csrf $csrfgen;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Safer $safer safer","info":"0"},{"code":"     * @param Csrf  $csrf  csrf","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Safer $safer, Csrf $csrf)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;safer = $safer;","info":"1"},{"code":"        $this-&gt;csrfgen = $csrf;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getVars","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getVars(): array","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;vars;","info":"1"},{"code":"    }","info":"-2"},{"code":"   ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method process","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string      $filename filename","info":"0"},{"code":"     * @param mixed[]     $data     data","info":"0"},{"code":"     * @param string|null $path     path","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function process(","info":"0"},{"code":"        string $filename,","info":"0"},{"code":"        array $data = [],","info":"0"},{"code":"        ?string $path = null","info":"0"},{"code":"    ): string {","info":"0"},{"code":"        $this-&gt;vars = [];","info":"1"},{"code":"        foreach ($this-&gt;safer-&gt;freez('htmlentities', $data) as $key =&gt; $value) {","info":"1"},{"code":"            if (is_numeric($key)) {","info":"1"},{"code":"                throw new RuntimeException(","info":"1"},{"code":"                    &quot;Variable name can not be number: '$key'&quot;","info":"1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            if (in_array($key, self::RESERVED_VARS, true)) {","info":"1"},{"code":"                throw new RuntimeException(","info":"1"},{"code":"                    &quot;Variable name is reserved: '$key'&quot;","info":"1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            $this-&gt;vars[$key] = $value;","info":"1"},{"code":"        }","info":"0"},{"code":"        $this-&gt;vars['csrf'] = $this-&gt;csrfgen-&gt;get();","info":"1"},{"code":"        ob_start();","info":"1"},{"code":"        $this-&gt;include($filename, $path);","info":"1"},{"code":"        $contents = (string)ob_get_contents();","info":"1"},{"code":"        ob_end_clean();","info":"1"},{"code":"        return $contents;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method include","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string      $filename filename","info":"0"},{"code":"     * @param string|null $path     path","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnusedVariable","info":"0"},{"code":"     * @suppress PhanPluginDollarDollar","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function include(string $filename, ?string $path = null): void","info":"0"},{"code":"    {","info":"0"},{"code":"        foreach ($this-&gt;vars as $key =&gt; $value) {","info":"1"},{"code":"            $$key = $value;","info":"1"},{"code":"        }","info":"0"},{"code":"        include null === $path ?","info":"1"},{"code":"            $this-&gt;getTemplateFile($filename) : ($path . $filename);","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method restrict","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function restrict(): void","info":"0"},{"code":"    {","info":"0"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getTemplateFile","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $tplfile tplfile","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getTemplateFile(string $tplfile): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $fullpath = $this::TPL_PATH_EXT . $tplfile;","info":"1"},{"code":"        if (!file_exists($fullpath)) {","info":"1"},{"code":"            $fullpath = $this::TPL_PATH . $tplfile;","info":"1"},{"code":"        }","info":"0"},{"code":"        if (!file_exists($fullpath)) {","info":"1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                'Template file not found: ' . $this::TPL_PATH_EXT . $tplfile .","info":"-1"},{"code":"                ' nor: ' . $fullpath","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        return $fullpath;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"0"}],"percentage":"90.909090909091"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Token.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Token","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Token","info":"0"},{"code":"{","info":"0"},{"code":"    protected Encrypter $encrypter;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Encrypter $encrypter encrypter","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Encrypter $encrypter)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;encrypter = $encrypter;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method generateToken","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function generate(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return urlencode(","info":"1"},{"code":"            base64_encode($this-&gt;encrypter-&gt;encrypt(md5((string)rand(1, 1000000))))","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/User.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * User","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class User","info":"0"},{"code":"{","info":"0"},{"code":"    protected Session $session;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Session $session session","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Session $session)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;session = $session;","info":"1"},{"code":"        \/\/        $this-&gt;session-&gt;destroy();","info":"0"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method isVisitor","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function isVisitor(): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return !$this-&gt;session-&gt;get('uid', 0);","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method login","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param int $uid uid","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function login(int $uid): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;session-&gt;set('uid', $uid);","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method logout","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return void","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function logout(): void","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;session-&gt;set('uid', 0);","info":"1"},{"code":"    }","info":"1"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator;","info":"0"},{"code":"","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Rule","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"abstract class Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = 'Invalid value';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getMessage","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getMessage(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this::MESSAGE;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method apply","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $props props","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return self","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function apply(array $props = []): self","info":"0"},{"code":"    {","info":"0"},{"code":"        $restprops = $props;","info":"1"},{"code":"        foreach (array_keys(get_object_vars($this)) as $key) {","info":"1"},{"code":"            $restprops = $this-&gt;applyKey($restprops, $props, $key);","info":"1"},{"code":"        }","info":"0"},{"code":"        if (!empty($restprops)) {","info":"1"},{"code":"            $class = get_class($this);","info":"-1"},{"code":"            $propstr = implode(&quot;', '$class::\\$&quot;, array_keys($restprops));","info":"-1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                &quot;Trying to apply some non-existing property on rule: '$class', &quot;","info":"-1"},{"code":"                    . &quot;invalid properties: '$propstr'.&quot;","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        return $this;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method applyKey","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $restprops restprops","info":"0"},{"code":"     * @param mixed[] $props     props","info":"0"},{"code":"     * @param string  $key       key","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return mixed[]","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function applyKey(array $restprops, array $props, string $key): array","info":"0"},{"code":"    {","info":"0"},{"code":"        if (array_key_exists($key, $props)) {","info":"1"},{"code":"            if ($this-&gt;$key instanceof self) {","info":"1"},{"code":"                $this-&gt;$key = $this-&gt;$key-&gt;apply($props[$key] ?: []);","info":"1"},{"code":"                unset($restprops[$key]);","info":"1"},{"code":"                return $restprops;","info":"1"},{"code":"            }","info":"0"},{"code":"            $varType = gettype($this-&gt;$key);","info":"1"},{"code":"            $propType = gettype($props[$key]);","info":"1"},{"code":"            if ($varType === 'NULL' || $varType === $propType) {","info":"1"},{"code":"                $this-&gt;$key = $props[$key];","info":"1"},{"code":"                unset($restprops[$key]);","info":"1"},{"code":"                return $restprops;","info":"1"},{"code":"            }","info":"0"},{"code":"            $class = get_class($this);","info":"-1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                &quot;Validation rule property &quot;","info":"0"},{"code":"                    . &quot;'$class::\\$$key' should be a &quot;","info":"-1"},{"code":"                    . &quot;'$varType' but '$propType' given.&quot;","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        if ($this-&gt;$key instanceof self","info":"1"},{"code":"            &amp;&amp; !array_keys(get_object_vars($this-&gt;$key))","info":"1"},{"code":"        ) {","info":"0"},{"code":"            unset($restprops[$key]);","info":"1"},{"code":"            return $restprops;","info":"1"},{"code":"        }","info":"0"},{"code":"        $class = get_class($this);","info":"-1"},{"code":"        throw new RuntimeException(","info":"-1"},{"code":"            &quot;Missing propery argument contract of rule: '$key', &quot;","info":"-1"},{"code":"                . &quot;invalid property definition for '$class::\\$$key'.&quot;","info":"-1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    abstract public function check($value): bool;","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"62.857142857143"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/Email.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Email","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Email extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = 'Invalid email format';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return (bool)filter_var($value, FILTER_VALIDATE_EMAIL);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/HasLower.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * HasLower","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class HasLower extends RegexMatch","info":"1"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Doesn't contains any lowercase letter&quot;;","info":"0"},{"code":"    const PATTERN = '\/[a-z]\/';","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/HasNumber.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * HasNumber","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class HasNumber extends RegexMatch","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Doesn't contains any number&quot;;","info":"0"},{"code":"    const PATTERN = '\/[0-9]\/';","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/HasSpecChar.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * HasSpecChar","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class HasSpecChar extends RegexNotMatch","info":"1"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Doesn't contains any special character&quot;;","info":"0"},{"code":"    const PATTERN = '\/^[a-zA-Z0-9]$\/';","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/HasUpper.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * HasUpper","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class HasUpper extends RegexMatch","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Doesn't contains any uppercase letter&quot;;","info":"0"},{"code":"    const PATTERN = '\/[A-Z]\/';","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/Mandatory.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Mandatory","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Mandatory extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Mandatory&quot;;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return (bool)$value;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/Match.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Match","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Match extends Rule","info":"1"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Doesn't match&quot;;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Variable $equalTo","info":"0"},{"code":"     *","info":"0"},{"code":"     * @var mixed","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected $equalTo;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;equalTo === $value;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/MinLength.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * MinLength","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class MinLength extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Too short&quot;;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected int $min = 0;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return strlen((string)$value) &gt;= $this-&gt;min;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/Number.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Number","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Number extends RegexMatch","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Not a number&quot;;","info":"0"},{"code":"    const PATTERN = '\/^[0-9]+$\/';","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/Password.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Password","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Password extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Invalid password&quot;;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected bool $checkMinLength = true;","info":"0"},{"code":"    protected bool $checkHasLower = true;","info":"0"},{"code":"    protected bool $checkHasUpper = true;","info":"0"},{"code":"    protected bool $checkHasNumber = true;","info":"0"},{"code":"    protected bool $checkHasSpecChar = true;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected MinLength $minLength;","info":"0"},{"code":"    protected HasLower $hasLower;","info":"0"},{"code":"    protected HasUpper $hasUpper;","info":"0"},{"code":"    protected HasNumber $hasNumber;","info":"0"},{"code":"    protected HasSpecChar $hasSpecChar;","info":"0"},{"code":"","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param MinLength   $minLength   minLength","info":"0"},{"code":"     * @param HasLower    $hasLower    hasLower","info":"0"},{"code":"     * @param HasUpper    $hasUpper    hasUpper","info":"0"},{"code":"     * @param HasNumber   $hasNumber   hasNumber","info":"0"},{"code":"     * @param HasSpecChar $hasSpecChar hasSpecChar","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        MinLength $minLength,","info":"0"},{"code":"        HasLower $hasLower,","info":"0"},{"code":"        HasUpper $hasUpper,","info":"0"},{"code":"        HasNumber $hasNumber,","info":"0"},{"code":"        HasSpecChar $hasSpecChar","info":"0"},{"code":"    ) {","info":"0"},{"code":"        $this-&gt;minLength = $minLength;","info":"1"},{"code":"        $this-&gt;hasLower = $hasLower;","info":"1"},{"code":"        $this-&gt;hasUpper = $hasUpper;","info":"1"},{"code":"        $this-&gt;hasNumber = $hasNumber;","info":"1"},{"code":"        $this-&gt;hasSpecChar = $hasSpecChar;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        if (!$this-&gt;checkBasic((string)$value)) {","info":"1"},{"code":"            return false;","info":"1"},{"code":"        }","info":"0"},{"code":"        if (!$this-&gt;checkMedium((string)$value)) {","info":"1"},{"code":"            return false;","info":"1"},{"code":"        }","info":"0"},{"code":"        if (!$this-&gt;checkComplex((string)$value)) {","info":"1"},{"code":"            return false;","info":"-1"},{"code":"        }","info":"0"},{"code":"        return true;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method checkBasic","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return boolean","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function checkBasic(string $value)","info":"0"},{"code":"    {","info":"0"},{"code":"        if ($this-&gt;checkMinLength &amp;&amp; !$this-&gt;minLength-&gt;check($value)) {","info":"1"},{"code":"            return false;","info":"1"},{"code":"        }","info":"0"},{"code":"        return true;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method checkMedium","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return boolean","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function checkMedium(string $value)","info":"0"},{"code":"    {","info":"0"},{"code":"        if ($this-&gt;checkHasLower &amp;&amp; !$this-&gt;hasLower-&gt;check($value)) {","info":"1"},{"code":"            return false;","info":"-1"},{"code":"        }","info":"0"},{"code":"        if ($this-&gt;checkHasUpper &amp;&amp; !$this-&gt;hasUpper-&gt;check($value)) {","info":"1"},{"code":"            return false;","info":"1"},{"code":"        }","info":"0"},{"code":"        return true;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method checkComplex","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return boolean","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function checkComplex(string $value)","info":"0"},{"code":"    {","info":"0"},{"code":"        if ($this-&gt;checkHasNumber &amp;&amp; !$this-&gt;hasNumber-&gt;check($value)) {","info":"1"},{"code":"            return false;","info":"-1"},{"code":"        }","info":"0"},{"code":"        if ($this-&gt;checkHasSpecChar &amp;&amp; !$this-&gt;hasSpecChar-&gt;check($value)) {","info":"1"},{"code":"            return false;","info":"-1"},{"code":"        }","info":"0"},{"code":"        return true;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"85.185185185185"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/PasswordVerify.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PasswordVerify","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class PasswordVerify extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Password isn't match&quot;;","info":"0"},{"code":"    ","info":"0"},{"code":"    protected string $password = '';","info":"0"},{"code":"    ","info":"0"},{"code":"    protected StringRule $stringRule;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param StringRule $stringRule stringRule","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(StringRule $stringRule)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;stringRule = $stringRule;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        if ($this-&gt;stringRule-&gt;check($value)) {","info":"1"},{"code":"            return password_verify($this-&gt;password, (string)$value);","info":"1"},{"code":"        }","info":"0"},{"code":"        return false;","info":"-1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"83.333333333333"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/RegexMatch.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * RegexMatch","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"abstract class RegexMatch extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Incorrect format&quot;;","info":"0"},{"code":"    const PATTERN = '\/\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $results = preg_match($this::PATTERN, (string)$value);","info":"1"},{"code":"        if (false === $results) {","info":"1"},{"code":"            throw new RuntimeException('Regexp matching error');","info":"-1"},{"code":"        }","info":"0"},{"code":"        return (bool)$results;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"80"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/RegexNotMatch.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * RegexNotMatch","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"abstract class RegexNotMatch extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Incorrect format&quot;;","info":"0"},{"code":"    const PATTERN = '\/\/';","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        $results = preg_match($this::PATTERN, $value);","info":"1"},{"code":"        if (false === $results) {","info":"1"},{"code":"            throw new RuntimeException('Regexp matching error');","info":"-1"},{"code":"        }","info":"0"},{"code":"        return !$results;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"80"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/Sleep.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Sleep","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Sleep extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    const MESSAGE = &quot;Delay error&quot;;","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return false !== sleep($value);","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Rule\/StringRule.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * StringRule","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator\\Rule","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class StringRule extends Rule","info":"0"},{"code":"{","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method check","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed $value value","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return bool","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function check($value): bool","info":"0"},{"code":"    {","info":"0"},{"code":"        return (!is_array($value)) &amp;&amp;","info":"1"},{"code":"                ((!is_object($value) &amp;&amp; settype($value, 'string') !== false) ||","info":"1"},{"code":"                (is_object($value) &amp;&amp; method_exists($value, '__toString')));","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/Validator\/Validator.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Library\\Validator;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Invoker;","info":"0"},{"code":"use RuntimeException;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * Validator","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Library\\Validator","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class Validator","info":"0"},{"code":"{","info":"0"},{"code":"    protected Invoker $invoker;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Invoker $invoker invoker","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(Invoker $invoker)","info":"0"},{"code":"    {","info":"0"},{"code":"        $this-&gt;invoker = $invoker;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method addErrors","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param string[][] $errors errors","info":"0"},{"code":"     * @param string     $fname  fname","info":"0"},{"code":"     * @param mixed      $value  value","info":"0"},{"code":"     * @param mixed[]    $rules  rules","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    protected function addErrors(","info":"0"},{"code":"        array &amp;$errors,","info":"0"},{"code":"        string $fname,","info":"0"},{"code":"        $value,","info":"0"},{"code":"        array $rules","info":"0"},{"code":"    ): array {","info":"0"},{"code":"        $errs = $this-&gt;getValueErrors($value, $rules);","info":"1"},{"code":"        if ($errs) {","info":"1"},{"code":"            $errors[$fname] = $errs;","info":"1"},{"code":"        }","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getErrors","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $fields fields","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getErrors(array $fields): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = [];","info":"1"},{"code":"        foreach ($fields as $fname =&gt; $field) {","info":"1"},{"code":"            if (!is_string($fname)) {","info":"1"},{"code":"                throw new RuntimeException(","info":"-1"},{"code":"                    &quot;Field name should be string, &quot;","info":"0"},{"code":"                        . &quot;descriptor array should be associative&quot;","info":"-1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            if (!isset($field['value'])) {","info":"1"},{"code":"                throw new RuntimeException(&quot;Field 'value' is missing: '$fname'&quot;);","info":"-1"},{"code":"            }","info":"0"},{"code":"            if (!isset($field['rules'])) {","info":"1"},{"code":"                throw new RuntimeException(&quot;Field 'rules' are missing: '$fname'&quot;);","info":"-1"},{"code":"            }","info":"0"},{"code":"            $errors = $this-&gt;addErrors(","info":"1"},{"code":"                $errors,","info":"1"},{"code":"                $fname,","info":"0"},{"code":"                $field['value'],","info":"1"},{"code":"                $field['rules']","info":"1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method getFirstError","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed[] $fields fields","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[][]","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getFirstError(array $fields): array","info":"0"},{"code":"    {","info":"0"},{"code":"        $errors = [];","info":"1"},{"code":"        foreach ($fields as $fname =&gt; $field) {","info":"1"},{"code":"            if (!is_string($fname)) {","info":"1"},{"code":"                throw new RuntimeException(","info":"-1"},{"code":"                    &quot;Field name should be string, &quot;","info":"0"},{"code":"                        . &quot;descriptor array should be associative&quot;","info":"-1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            $errors = $this-&gt;addErrors(","info":"1"},{"code":"                $errors,","info":"1"},{"code":"                $fname,","info":"0"},{"code":"                $field['value'],","info":"1"},{"code":"                $field['rules']","info":"1"},{"code":"            );","info":"0"},{"code":"            if (array_key_exists($fname, $errors)) {","info":"1"},{"code":"                break;","info":"1"},{"code":"            }","info":"0"},{"code":"        }","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method checkValue","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param mixed   $value value","info":"0"},{"code":"     * @param mixed[] $args  args","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string[]","info":"0"},{"code":"     * @throws RuntimeException","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function getValueErrors($value, array $args): array","info":"0"},{"code":"    {","info":"0"},{"code":"        if (empty($args)) {","info":"1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                'Validation rule arguments can not be empty. '","info":"0"},{"code":"                    . 'Empty array given.'","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        $restargs = $args;","info":"1"},{"code":"        $errors = [];","info":"1"},{"code":"        foreach ($args as $class =&gt; $params) {","info":"1"},{"code":"            if (is_numeric($class)) {","info":"1"},{"code":"                throw new RuntimeException(","info":"-1"},{"code":"                    &quot;Non-associative validation rule contract descriptor given. &quot;","info":"0"},{"code":"                        . &quot;Format should looks like array[rule][property] = value.&quot;","info":"-1"},{"code":"                );","info":"0"},{"code":"            }","info":"0"},{"code":"            $rule = $this-&gt;invoker-&gt;getInstance($class);","info":"1"},{"code":"            $rule-&gt;apply($params ?: []);","info":"1"},{"code":"            if (!$rule-&gt;check($value)) {","info":"1"},{"code":"                $errors[] = $rule-&gt;getMessage();","info":"1"},{"code":"            }","info":"0"},{"code":"            unset($restargs[$class]);","info":"1"},{"code":"        }","info":"0"},{"code":"        if (!empty($restargs)) {","info":"1"},{"code":"            $classes = implode(&quot;', '&quot;, array_keys($restargs));","info":"-1"},{"code":"            throw new RuntimeException(","info":"-1"},{"code":"                &quot;Trying to apply some validation rule properties &quot;","info":"0"},{"code":"                    . &quot;but rules are not defined or missing: '$classes'&quot;","info":"-1"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        return $errors;","info":"1"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"75"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/config\/config.ini":{"lines":[{"code":"[Site]","info":"1"},{"code":"base = &quot;http:\/\/localhost\/talkbot\/&quot;","info":"0"},{"code":"","info":"0"},{"code":"[Mailer]","info":"0"},{"code":"host = &quot;&quot;","info":"0"},{"code":"user = &quot;&quot;","info":"0"},{"code":"secret = &quot;&quot;","info":"0"},{"code":"port = 0","info":"0"},{"code":"system_email = &quot;system@example.com&quot;","info":"0"},{"code":"system_from = &quot;System&quot;","info":"0"},{"code":"noreply_email = &quot;noreply@example.com&quot;","info":"0"},{"code":"noreply_from = &quot;No Reply&quot;","info":"0"},{"code":"send_mail = false","info":"0"},{"code":"save_mail = false","info":"0"},{"code":"save_mail_path = '&lt;?=$__DIR__?&gt;\/mails\/'","info":"1"},{"code":"save_mail_mode = 0777","info":"0"},{"code":"","info":"0"},{"code":"","info":"0"},{"code":"","info":"0"},{"code":"","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/config\/config.test.ini":{"lines":[{"code":"[Mailer]","info":"1"},{"code":"send_mail = false","info":"0"},{"code":"save_mail = true","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/Library\/phtml\/messages.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"","info":"1"},{"code":"&lt;?php if (isset($messages)): ?&gt;","info":"1"},{"code":"&lt;div class=&quot;messages&quot;&gt;","info":"1"},{"code":"    ","info":"0"},{"code":"    &lt;?php foreach (array_keys($messages) as $class): ?&gt;","info":"1"},{"code":"    &lt;ul class=&quot;&lt;?=$class?&gt;&quot;&gt;","info":"1"},{"code":"        ","info":"0"},{"code":"        &lt;?php foreach($messages[$class] as $message): ?&gt;        ","info":"1"},{"code":"        &lt;li&gt;&lt;?=$message?&gt;&lt;\/li&gt;        ","info":"1"},{"code":"        &lt;?php endforeach ?&gt;","info":"0"},{"code":"        ","info":"1"},{"code":"    &lt;\/ul&gt;","info":"0"},{"code":"    &lt;?php endforeach ?&gt;","info":"0"},{"code":"    ","info":"1"},{"code":"&lt;\/div&gt;","info":"0"},{"code":"&lt;?php endif ?&gt;","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/route.cache.php":{"lines":[{"code":"&lt;?php $routes=array (","info":"1"},{"code":"  'public' =&gt; ","info":"0"},{"code":"  array (","info":"0"},{"code":"    'GET' =&gt; ","info":"0"},{"code":"    array (","info":"0"},{"code":"      '' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\LoginTemplateResponder',","info":"1"},{"code":"        1 =&gt; 'getLoginFormResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'login' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\LoginTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getLoginFormResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'registry' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\RegistryTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getRegistryFormResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'resend' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\RegistryTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getResendResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'activate' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\ActivateTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getActivateResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'reset' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\PasswordResetTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getPasswordResetFormResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'example' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Example\\\\Example',","info":"0"},{"code":"        1 =&gt; 'getPublic',","info":"0"},{"code":"      ),","info":"0"},{"code":"    ),","info":"0"},{"code":"    'POST' =&gt; ","info":"0"},{"code":"    array (","info":"0"},{"code":"      '' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\LoginTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getLoginResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'login' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\LoginTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getLoginResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'registry' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\RegistryTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getRegistryResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'reset' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\PasswordResetTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getPasswordResetRequestResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'change' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\PasswordChangeTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getPasswordChangeResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"    ),","info":"0"},{"code":"  ),","info":"0"},{"code":"  'protected' =&gt; ","info":"0"},{"code":"  array (","info":"0"},{"code":"    'GET' =&gt; ","info":"0"},{"code":"    array (","info":"0"},{"code":"      'logout' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Account\\\\Template\\\\LogoutTemplateResponder',","info":"0"},{"code":"        1 =&gt; 'getLogoutResponse',","info":"0"},{"code":"      ),","info":"0"},{"code":"      '' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Example\\\\Example',","info":"0"},{"code":"        1 =&gt; 'getProtected',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'example' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Library\\\\Responder\\\\Example\\\\Example',","info":"0"},{"code":"        1 =&gt; 'getProtected',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'my-scripts\/list' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Talkbot\\\\MyScripts',","info":"1"},{"code":"        1 =&gt; 'viewList',","info":"0"},{"code":"      ),","info":"0"},{"code":"      'my-scripts\/create' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Talkbot\\\\MyScripts',","info":"0"},{"code":"        1 =&gt; 'viewCreate',","info":"0"},{"code":"      ),","info":"0"},{"code":"    ),","info":"0"},{"code":"    'POST' =&gt; ","info":"0"},{"code":"    array (","info":"0"},{"code":"      'my-scripts\/create' =&gt; ","info":"0"},{"code":"      array (","info":"0"},{"code":"        0 =&gt; 'Madsoft\\\\Talkbot\\\\MyScripts',","info":"0"},{"code":"        1 =&gt; 'doCreate',","info":"0"},{"code":"      ),","info":"0"},{"code":"    ),","info":"0"},{"code":"  ),","info":"0"},{"code":");","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/lib\/tools\/test\/test.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Test","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Invoker;","info":"0"},{"code":"use Madsoft\\Library\\Test\\LibraryTestCleaner;","info":"0"},{"code":"use Madsoft\\Library\\Tester\\Tester;","info":"0"},{"code":"","info":"0"},{"code":"require __DIR__ . '\/..\/..\/..\/vendor\/autoload.php';","info":"0"},{"code":"","info":"0"},{"code":"if (php_sapi_name() !== 'cli') {","info":"0"},{"code":"    throw new RuntimeException('Test can run only from command line.');","info":"0"},{"code":"}","info":"0"},{"code":"","info":"0"},{"code":"$tester = (new Invoker())-&gt;getInstance(Tester::class)-&gt;setCleaners(","info":"0"},{"code":"    [","info":"0"},{"code":"        \/\/    TalkbotTestCleaner::class,","info":"0"},{"code":"        LibraryTestCleaner::class,","info":"0"},{"code":"    ]","info":"0"},{"code":");","info":"0"},{"code":"        ","info":"0"},{"code":"$tester-&gt;cleanUp();","info":"0"},{"code":"","info":"0"},{"code":"$tester-&gt;getCoverage()-&gt;start(","info":"0"},{"code":"    [","info":"0"},{"code":"        __DIR__ . &quot;\/..\/..\/..\/vendor\/&quot;,","info":"0"},{"code":"        __DIR__ . &quot;\/..\/..\/..\/lib\/Library\/Coverage\/Coverage.php&quot;,","info":"0"},{"code":"        __DIR__ . &quot;\/..\/..\/..\/lib\/Library\/Tester\/Test.php&quot;,","info":"0"},{"code":"        __DIR__ . &quot;\/..\/..\/..\/lib\/Library\/Tester\/Tester.php&quot;,","info":"0"},{"code":"        __DIR__ . &quot;\/..\/..\/..\/lib\/tests\/&quot;,","info":"0"},{"code":"        __DIR__ . &quot;\/..\/..\/..\/src\/tests\/&quot;,","info":"0"},{"code":"    ]","info":"0"},{"code":");","info":"0"},{"code":"","info":"0"},{"code":"array_shift($argv);","info":"1"},{"code":"if (empty($argv)) {","info":"1"},{"code":"    $tester-&gt;test();","info":"1"},{"code":"} else {","info":"0"},{"code":"    foreach ($argv as $arg) {","info":"0"},{"code":"        $tester-&gt;runTestFile($arg, '');","info":"0"},{"code":"    }","info":"0"},{"code":"}","info":"0"},{"code":"","info":"0"},{"code":"$tester-&gt;cleanUp();","info":"1"},{"code":"","info":"0"},{"code":"exit($tester-&gt;stat() ? 0 : 1);","info":"1"},{"code":"","info":"0"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/src\/Talkbot\/MyScripts.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Talkbot","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Talkbot;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Crud;","info":"0"},{"code":"use Madsoft\\Library\\Mysql;","info":"0"},{"code":"use Madsoft\\Library\\Params;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Validator;","info":"0"},{"code":"use Madsoft\\Library\\Validator\\Rule\\Mandatory;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * MyScripts","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Talkbot","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *","info":"0"},{"code":" * @suppress PhanUnreferencedClass","info":"0"},{"code":" * @suppress PhanUnreferencedPublicClassConstant","info":"0"},{"code":" *\/","info":"0"},{"code":"class MyScripts","info":"0"},{"code":"{","info":"0"},{"code":"    const ROUTES = [","info":"0"},{"code":"        'protected' =&gt; [","info":"0"},{"code":"            'GET' =&gt; [","info":"0"},{"code":"                'my-scripts\/list' =&gt; [MyScripts::class, 'viewList'],","info":"0"},{"code":"                'my-scripts\/create' =&gt; [MyScripts::class, 'viewCreate'],","info":"0"},{"code":"            ],","info":"0"},{"code":"            'POST' =&gt; [","info":"0"},{"code":"                'my-scripts\/create' =&gt; [MyScripts::class, 'doCreate'],","info":"0"},{"code":"            ],","info":"0"},{"code":"        ],","info":"0"},{"code":"    ];","info":"0"},{"code":"    ","info":"0"},{"code":"    protected Mysql $mysql;","info":"0"},{"code":"    protected Crud $crud;","info":"0"},{"code":"    protected Params $params;","info":"0"},{"code":"    protected Validator $checker;","info":"0"},{"code":"    protected TalkbotTemplateResponder $responder;","info":"0"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Mysql                    $mysql     mysql","info":"0"},{"code":"     * @param Crud                     $crud      crud","info":"0"},{"code":"     * @param Params                   $params    params","info":"0"},{"code":"     * @param Validator                $checker   checker","info":"0"},{"code":"     * @param TalkbotTemplateResponder $responder responder","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Mysql $mysql,","info":"0"},{"code":"        Crud $crud,","info":"0"},{"code":"        Params $params,","info":"0"},{"code":"        Validator $checker,","info":"0"},{"code":"        TalkbotTemplateResponder $responder","info":"0"},{"code":"    ) {","info":"0"},{"code":"        $this-&gt;mysql = $mysql;","info":"1"},{"code":"        $this-&gt;crud = $crud;","info":"1"},{"code":"        $this-&gt;params = $params;","info":"1"},{"code":"        $this-&gt;checker = $checker;","info":"1"},{"code":"        $this-&gt;responder = $responder;","info":"1"},{"code":"    }","info":"1"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method viewList","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function viewList(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;responder-&gt;setTplfile('my-scripts\/list.phtml')-&gt;getResponse(","info":"1"},{"code":"            ['my_scripts' =&gt; $this-&gt;crud-&gt;get('script', ['name'], [], 0)]","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method viewCreate","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function viewCreate(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        return $this-&gt;responder-&gt;setTplfile('my-scripts\/create.phtml')-&gt;getResponse(","info":"1"},{"code":"            ['name' =&gt; '']","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"    ","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method doCreate","info":"0"},{"code":"     *","info":"0"},{"code":"     * @return string","info":"0"},{"code":"     *","info":"0"},{"code":"     * @suppress PhanUnreferencedPublicMethod","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function doCreate(): string","info":"0"},{"code":"    {","info":"0"},{"code":"        $name = $this-&gt;params-&gt;get('name', '');","info":"1"},{"code":"        $errors = $this-&gt;checker-&gt;getErrors(","info":"1"},{"code":"            [","info":"0"},{"code":"                'name' =&gt; [","info":"0"},{"code":"                    'value' =&gt; $name,","info":"1"},{"code":"                    'rules' =&gt; [Mandatory::class =&gt; null]","info":"0"},{"code":"                ]","info":"0"},{"code":"            ]","info":"0"},{"code":"        );","info":"0"},{"code":"        if ($errors) {","info":"1"},{"code":"            return $this-&gt;responder-&gt;setTplfile(","info":"-1"},{"code":"                'my-scripts\/create.html'","info":"-1"},{"code":"            )-&gt;getErrorResponse(","info":"-1"},{"code":"                'Invalid parameters',","info":"-1"},{"code":"                $errors","info":"0"},{"code":"            );","info":"0"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $sid = $this-&gt;crud-&gt;add('script', ['name' =&gt; $this-&gt;params-&gt;get('name')]);","info":"1"},{"code":"        if (!$sid) {","info":"1"},{"code":"            $this-&gt;mysql-&gt;transRollback();","info":"-1"},{"code":"            return $this-&gt;responder-&gt;setTplfile(","info":"-1"},{"code":"                'my-scripts\/create.phtml'","info":"-1"},{"code":"            )-&gt;getErrorResponse();","info":"-1"},{"code":"        }","info":"0"},{"code":"        ","info":"0"},{"code":"        $myScripts = $this-&gt;crud-&gt;get('script', ['name'], [], 0);","info":"1"},{"code":"        return $this-&gt;responder-&gt;setTplfile(","info":"1"},{"code":"            'my-scripts\/list.phtml'","info":"1"},{"code":"        )-&gt;getSuccessResponse(","info":"1"},{"code":"            'Script &quot;' . $name . '&quot; is created',","info":"1"},{"code":"            ['my_scripts' =&gt; $myScripts]","info":"1"},{"code":"        );","info":"0"},{"code":"    }","info":"-2"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"74.193548387097"},"\/var\/www\/sandbox\/my-project\/src\/Talkbot\/TalkbotTemplate.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Talkbot","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Talkbot;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Template;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * TalkbotTemplate","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Talkbot","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class TalkbotTemplate extends Template","info":"0"},{"code":"{","info":"0"},{"code":"    const TPL_PATH_EXT = __DIR__ . '\/phtml\/';","info":"0"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/src\/Talkbot\/TalkbotTemplateResponder.php":{"lines":[{"code":"&lt;?php declare(strict_types = 1);","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * PHP version 7.4","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Talkbot","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"","info":"0"},{"code":"namespace Madsoft\\Talkbot;","info":"0"},{"code":"","info":"0"},{"code":"use Madsoft\\Library\\Merger;","info":"0"},{"code":"use Madsoft\\Library\\Messages;","info":"0"},{"code":"use Madsoft\\Library\\Responder\\TemplateResponder;","info":"0"},{"code":"","info":"0"},{"code":"\/**","info":"0"},{"code":" * TalkbotResponder","info":"0"},{"code":" *","info":"0"},{"code":" * @category  PHP","info":"0"},{"code":" * @package   Madsoft\\Talkbot","info":"0"},{"code":" * @author    Gyula Madarasz &lt;gyula.madarasz@gmail.com&gt;","info":"0"},{"code":" * @copyright 2020 Gyula Madarasz","info":"0"},{"code":" * @license   Copyright (c) All rights reserved.","info":"0"},{"code":" * @link      this","info":"0"},{"code":" *\/","info":"0"},{"code":"class TalkbotTemplateResponder extends TemplateResponder","info":"0"},{"code":"{","info":"0"},{"code":"    \/**","info":"0"},{"code":"     * Method __construct","info":"0"},{"code":"     *","info":"0"},{"code":"     * @param Messages        $messages messages","info":"0"},{"code":"     * @param Merger          $merger   merger","info":"0"},{"code":"     * @param TalkbotTemplate $template template","info":"0"},{"code":"     *\/","info":"0"},{"code":"    public function __construct(","info":"0"},{"code":"        Messages $messages,","info":"0"},{"code":"        Merger $merger,","info":"0"},{"code":"        TalkbotTemplate $template","info":"0"},{"code":"    ) {","info":"0"},{"code":"        parent::__construct($messages, $merger, $template);","info":"1"},{"code":"    }","info":"1"},{"code":"}","info":"0"},{"code":"","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/src\/Talkbot\/phtml\/my-scripts\/create.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;My Scripts \/ Create&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"","info":"1"},{"code":"&lt;form method=&quot;POST&quot; action=&quot;?q=my-scripts\/create&quot;&gt;","info":"0"},{"code":"    &lt;?=$csrf?&gt;","info":"1"},{"code":"    &lt;input name=&quot;name&quot; value=&quot;&lt;?=$name?&gt;&quot; placeholder=&quot;Name&quot;&gt;","info":"1"},{"code":"    &lt;input type=&quot;submit&quot; value=&quot;Create&quot;&gt;","info":"0"},{"code":"&lt;\/form&gt;","info":"1"}],"percentage":"100"},"\/var\/www\/sandbox\/my-project\/src\/Talkbot\/phtml\/my-scripts\/list.phtml":{"lines":[{"code":"&lt;?php $this-&gt;restrict(); ?&gt;","info":"1"},{"code":"&lt;h1&gt;My Scripts \/ List&lt;\/h1&gt;","info":"1"},{"code":"&lt;?php include $this-&gt;getTemplateFile('messages.phtml') ?&gt;","info":"1"},{"code":"","info":"1"},{"code":"Scripts:","info":"0"},{"code":"&lt;?php var_dump($my_scripts); ?&gt;","info":"1"}],"percentage":"100"}};</script>
    </head>
    <body>
        <span>Total coverage:</span><b><i>86.62 %</i></b>
        <ul id="filelist"></ul>
        <script src="coverage.js"></script>
    </body>
</html>
